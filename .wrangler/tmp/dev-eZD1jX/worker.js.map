{
  "version": 3,
  "sources": ["../bundle-4iNbFn/checked-fetch.js", "../bundle-4iNbFn/strip-cf-connecting-ip-header.js", "../../../node_modules/src/src/Router.ts", "../../../node_modules/src/src/StatusError.ts", "../../../node_modules/src/src/createResponse.ts", "../../../node_modules/src/src/json.ts", "../../../node_modules/src/src/error.ts", "../../../node_modules/src/src/status.ts", "../../../node_modules/src/src/text.ts", "../../../node_modules/src/src/html.ts", "../../../node_modules/src/src/jpeg.ts", "../../../node_modules/src/src/png.ts", "../../../node_modules/src/src/webp.ts", "../../../node_modules/src/src/withContent.ts", "../../../node_modules/src/src/withCookies.ts", "../../../node_modules/src/src/withParams.ts", "../../../node_modules/src/src/createCors.ts", "../../../src/worker.js", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-4iNbFn/middleware-insertion-facade.js", "../../../node_modules/wrangler/templates/middleware/common.ts", "../bundle-4iNbFn/middleware-loader.entry.ts"],
  "sourceRoot": "D:\\GitHub\\personasset\\.wrangler\\tmp\\dev-eZD1jX",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t\t);\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", "function stripCfConnectingIPHeader(input, init) {\n\tconst request = new Request(input, init);\n\trequest.headers.delete(\"CF-Connecting-IP\");\n\treturn request;\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\treturn Reflect.apply(target, thisArg, [\n\t\t\tstripCfConnectingIPHeader.apply(null, argArray),\n\t\t]);\n\t},\n});\n", null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "import { Router } from 'itty-router';\n\nconst router = Router();\n\n// CORS headers\nconst corsHeaders = {\n  'Access-Control-Allow-Origin': '*',\n  'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n  'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n};\n\n// Handle CORS preflight requests\nrouter.options('*', () => new Response(null, { headers: corsHeaders }));\n\n// \u7528\u6237\u7BA1\u7406\u51FD\u6570\nasync function getUserId(request, env) {\n  // \u4E34\u65F6\u4F7F\u7528\u56FA\u5B9A\u7528\u6237ID\u8FDB\u884C\u6D4B\u8BD5\n  return 'ebda3063c344bd33';\n  \n  const ip = request.headers.get('CF-Connecting-IP') || request.headers.get('X-Forwarded-For') || 'unknown';\n  const userAgent = request.headers.get('User-Agent') || 'unknown';\n  const identifier = `${ip}-${userAgent}`;\n  \n  // \u751F\u6210\u7528\u6237ID\uFF08\u4F7F\u7528SHA-256\u54C8\u5E0C\u7684\u524D16\u4F4D\uFF09\n  const encoder = new TextEncoder();\n  const data = encoder.encode(identifier);\n  const hashBuffer = await crypto.subtle.digest('SHA-256', data);\n  const hashArray = new Uint8Array(hashBuffer);\n  const hashHex = Array.from(hashArray).map(b => b.toString(16).padStart(2, '0')).join('');\n  const userId = hashHex.substring(0, 16);\n  \n  // \u68C0\u67E5\u7528\u6237\u662F\u5426\u5B58\u5728\uFF0C\u4E0D\u5B58\u5728\u5219\u521B\u5EFA\n  const existingUser = await env.DB.prepare('SELECT * FROM users WHERE user_id = ?').bind(userId).first();\n  \n  if (!existingUser) {\n    // \u751F\u6210\u968F\u673A\u4E2D\u6587\u7528\u6237\u540D\n    const surnames = ['\u5F20', '\u674E', '\u738B', '\u5218', '\u9648', '\u6768', '\u8D75', '\u9EC4', '\u5468', '\u5434'];\n    const names = ['\u4F1F', '\u82B3', '\u5A1C', '\u654F', '\u9759', '\u4E3D', '\u5F3A', '\u78CA', '\u519B', '\u6D0B'];\n    const randomName = surnames[Math.floor(Math.random() * surnames.length)] + names[Math.floor(Math.random() * names.length)];\n    \n    await env.DB.prepare(`\n      INSERT INTO users (user_id, username, ip_address, created_at, last_login)\n      VALUES (?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)\n    `).bind(userId, randomName, ip).run();\n  } else {\n    // \u66F4\u65B0\u6700\u540E\u767B\u5F55\u65F6\u95F4\n    await env.DB.prepare(`\n      UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE user_id = ?\n    `).bind(userId).run();\n  }\n  \n  return userId;\n}\n\n// \u751F\u6210\u672A\u6765\u73B0\u91D1\u6D41\u6570\u636E\u7684\u8F85\u52A9\u51FD\u6570\nasync function generateFutureCashFlows(env, userId, monthsAhead = 6) {\n  try {\n    // \u83B7\u53D6\u6240\u6709\u6FC0\u6D3B\u7684\u6A21\u677F\n    const { results: templates } = await env.DB.prepare(`\n      SELECT * FROM cash_flow_templates \n      WHERE user_id = ? AND is_active = 1\n    `).bind(userId).all();\n    \n    const currentDate = new Date();\n    const currentYear = currentDate.getFullYear();\n    const currentMonth = currentDate.getMonth() + 1;\n    \n    // \u6E05\u9664\u5DF2\u751F\u6210\u7684\u672A\u6765\u6570\u636E\n    await env.DB.prepare(`\n      DELETE FROM cash_flows \n      WHERE user_id = ? AND is_generated = 1 AND date >= ?\n    `).bind(userId, `${currentYear}-${String(currentMonth).padStart(2, '0')}-01`).run();\n    \n    // \u4E3A\u6BCF\u4E2A\u6A21\u677F\u751F\u6210\u672A\u6765\u51E0\u4E2A\u6708\u7684\u6570\u636E\n    for (const template of templates) {\n      for (let i = 0; i < monthsAhead; i++) {\n        const targetDate = new Date(currentYear, currentMonth - 1 + i, template.day_of_month);\n        const targetDateStr = targetDate.toISOString().split('T')[0];\n        \n        // \u68C0\u67E5\u662F\u5426\u8D85\u8FC7\u6A21\u677F\u7684\u7ED3\u675F\u65E5\u671F\n        if (template.end_date && targetDateStr > template.end_date) {\n          continue;\n        }\n        \n        // \u68C0\u67E5\u662F\u5426\u5DF2\u5B58\u5728\u8BE5\u6708\u7684\u6570\u636E\n        const existing = await env.DB.prepare(`\n          SELECT id FROM cash_flows \n          WHERE user_id = ? AND template_id = ? AND strftime('%Y-%m', date) = ?\n        `).bind(userId, template.id, targetDate.toISOString().substring(0, 7)).first();\n        \n        if (!existing) {\n          await env.DB.prepare(`\n            INSERT INTO cash_flows (user_id, type, description, amount, date, category, template_id, is_generated)\n            VALUES (?, ?, ?, ?, ?, ?, ?, 1)\n          `).bind(\n            userId,\n            template.type,\n            template.description,\n            template.amount,\n            targetDateStr,\n            template.category,\n            template.id\n          ).run();\n        }\n      }\n    }\n    \n    return true;\n  } catch (error) {\n    console.error('\u751F\u6210\u672A\u6765\u73B0\u91D1\u6D41\u6570\u636E\u5931\u8D25:', error);\n    return false;\n  }\n}\n\n// \u9759\u6001\u6587\u4EF6\u670D\u52A1\nrouter.get('/', async (request, env) => {\n  // \u8FD4\u56DE\u79FB\u52A8\u7AEF\u53CB\u597D\u7684H5\u9875\u9762\n  const html = `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\">\n    <title>\u4E2A\u4EBA\u8D44\u4EA7\u7EC4\u5408</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n    <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"default\">\n    <meta name=\"format-detection\" content=\"telephone=no\">\n    <style>\n        .tab-btn {\n            color: #6b7280;\n            background-color: transparent;\n        }\n        .tab-btn.active {\n            color: #3b82f6;\n            background-color: #dbeafe;\n        }\n        .tab-btn:hover {\n            background-color: #f3f4f6;\n        }\n        .tab-btn.active:hover {\n            background-color: #dbeafe;\n        }\n    </style>\n</head>\n<body class=\"bg-gray-50 min-h-screen overflow-x-hidden\">\n    <!-- \u79FB\u52A8\u7AEF\u5BFC\u822A\u680F -->\n    <div class=\"bg-white shadow-sm sticky top-0 z-50\">\n        <div class=\"px-4 py-3\">\n            <div class=\"flex items-center justify-between\">\n                <h1 class=\"text-lg font-bold text-gray-800 flex items-center\">\n                    <i class=\"fas fa-chart-line mr-2 text-blue-500\"></i>\n                    \u4E2A\u4EBA\u8D44\u4EA7\u7EC4\u5408\n                </h1>\n                <button id=\"menuBtn\" class=\"p-2 rounded-lg bg-gray-100 text-gray-600\">\n                    <i class=\"fas fa-bars\"></i>\n                </button>\n            </div>\n            \n            <!-- \u4E0B\u62C9\u83DC\u5355 -->\n            <div id=\"dropdownMenu\" class=\"hidden absolute top-full right-4 mt-1 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\n                <div class=\"py-2\">\n                    <button id=\"assetTypesBtn\" class=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center\">\n                        <i class=\"fas fa-tags mr-2 text-blue-500\"></i>\n                        \u8D44\u4EA7\u7C7B\u578B\u7BA1\u7406\n                    </button>\n                    <button id=\"settingsBtn\" class=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center\">\n                        <i class=\"fas fa-cog mr-2 text-gray-500\"></i>\n                        \u8BBE\u7F6E\n                    </button>\n                    <button id=\"aboutBtn\" class=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center\">\n                        <i class=\"fas fa-info-circle mr-2 text-green-500\"></i>\n                        \u5173\u4E8E\n                    </button>\n                </div>\n            </div>\n        </div>\n        \n        <!-- \u5E95\u90E8\u5BFC\u822A -->\n        <div class=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50\">\n            <div class=\"grid grid-cols-4 gap-1 p-2\">\n                <button id=\"dashboardBtn\" class=\"nav-tab active flex flex-col items-center py-2 px-1 rounded-lg transition-all\">\n                    <i class=\"fas fa-home text-lg mb-1\"></i>\n                    <span class=\"text-xs\">\u9996\u9875</span>\n                </button>\n                <button id=\"assetsBtn\" class=\"nav-tab flex flex-col items-center py-2 px-1 rounded-lg transition-all\">\n                    <i class=\"fas fa-coins text-lg mb-1\"></i>\n                    <span class=\"text-xs\">\u8D44\u4EA7</span>\n                </button>\n                <button id=\"liabilitiesBtn\" class=\"nav-tab flex flex-col items-center py-2 px-1 rounded-lg transition-all\">\n                    <i class=\"fas fa-credit-card text-lg mb-1\"></i>\n                    <span class=\"text-xs\">\u8D1F\u503A</span>\n                </button>\n                <button id=\"cashFlowBtn\" class=\"nav-tab flex flex-col items-center py-2 px-1 rounded-lg transition-all\">\n                    <i class=\"fas fa-chart-line text-lg mb-1\"></i>\n                    <span class=\"text-xs\">\u8D44\u91D1\u6D41</span>\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <!-- \u4E3B\u5185\u5BB9\u533A\u57DF -->\n    <div class=\"pb-20 px-4 py-4\">\n        <!-- \u4EEA\u8868\u677F\u9875\u9762 -->\n        <div id=\"dashboardPage\" class=\"page\">\n            <!-- \u7528\u6237\u4FE1\u606F -->\n            <div class=\"mb-4 bg-white rounded-lg p-4 shadow-sm\">\n                <div class=\"flex items-center justify-between\">\n                    <div>\n                        <h3 class=\"text-sm text-gray-500\">\u6B22\u8FCE\u56DE\u6765</h3>\n                        <p id=\"username\" class=\"text-lg font-semibold text-gray-800\">\u52A0\u8F7D\u4E2D...</p>\n                    </div>\n                    <div class=\"text-right\">\n                        <p class=\"text-xs text-gray-400\">\u6700\u540E\u767B\u5F55</p>\n                        <p id=\"lastLogin\" class=\"text-sm text-gray-600\">\u52A0\u8F7D\u4E2D...</p>\n                    </div>\n                </div>\n            </div>\n            \n            <!-- \u8D44\u4EA7\u603B\u89C8\uFF08\u4E00\u884C\u663E\u793A\uFF09 -->\n            <div class=\"grid grid-cols-3 gap-3 mb-6\">\n                <div class=\"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 text-white\">\n                    <div class=\"text-center\">\n                        <i class=\"fas fa-coins text-2xl mb-2\"></i>\n                        <p class=\"text-xs opacity-90\">\u603B\u8D44\u4EA7</p>\n                        <p id=\"totalAssets\" class=\"text-lg font-bold\">\uFFE50</p>\n                    </div>\n                </div>\n                <div class=\"bg-gradient-to-r from-red-500 to-red-600 rounded-lg p-4 text-white\">\n                    <div class=\"text-center\">\n                        <i class=\"fas fa-credit-card text-2xl mb-2\"></i>\n                        <p class=\"text-xs opacity-90\">\u603B\u8D1F\u503A</p>\n                        <p id=\"totalLiabilities\" class=\"text-lg font-bold\">\uFFE50</p>\n                    </div>\n                </div>\n                <div class=\"bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-4 text-white\">\n                    <div class=\"text-center\">\n                        <i class=\"fas fa-chart-line text-2xl mb-2\"></i>\n                        <p class=\"text-xs opacity-90\">\u51C0\u8D44\u4EA7</p>\n                        <p id=\"netWorth\" class=\"text-lg font-bold\">\uFFE50</p>\n                    </div>\n                </div>\n            </div>\n            \n            <!-- \u4ECA\u5E74\u6536\u652F\u5BF9\u6BD4 -->\n            <div class=\"bg-white rounded-lg p-4 shadow-sm mb-4\">\n                <h3 class=\"text-lg font-semibold text-gray-800 mb-3 flex items-center\">\n                    <i class=\"fas fa-balance-scale mr-2 text-purple-500\"></i>\n                    \u4ECA\u5E74\u6536\u652F\u5BF9\u6BD4\n                </h3>\n                <div class=\"grid grid-cols-4 gap-2 text-center\">\n                    <div class=\"p-2 bg-green-50 rounded-lg\">\n                        <p class=\"text-xs text-gray-600 mb-1\">\u9884\u8BA1\u6536\u5165</p>\n                        <p id=\"projectedIncome\" class=\"text-sm font-bold text-green-600\">\uFFE50</p>\n                    </div>\n                    <div class=\"p-2 bg-green-100 rounded-lg\">\n                        <p class=\"text-xs text-gray-600 mb-1\">\u5B9E\u9645\u6536\u5165</p>\n                        <p id=\"actualIncome\" class=\"text-sm font-bold text-green-700\">\uFFE50</p>\n                    </div>\n                    <div class=\"p-2 bg-red-50 rounded-lg\">\n                        <p class=\"text-xs text-gray-600 mb-1\">\u9884\u8BA1\u652F\u51FA</p>\n                        <p id=\"projectedExpense\" class=\"text-sm font-bold text-red-600\">\uFFE50</p>\n                    </div>\n                    <div class=\"p-2 bg-red-100 rounded-lg\">\n                        <p class=\"text-xs text-gray-600 mb-1\">\u5B9E\u9645\u652F\u51FA</p>\n                        <p id=\"actualExpense\" class=\"text-sm font-bold text-red-700\">\uFFE50</p>\n                    </div>\n                </div>\n                <div class=\"mt-3 text-center p-2 rounded-lg\" id=\"balanceStatus\">\n                    <p class=\"text-sm font-medium\" id=\"balanceText\">\u52A0\u8F7D\u4E2D...</p>\n                </div>\n            </div>\n            \n            <!-- \u4E00\u5E74\u6536\u652F\u8D8B\u52BF\u56FE -->\n            <div class=\"bg-white rounded-lg p-4 shadow-sm mb-4\">\n                <h3 class=\"text-lg font-semibold text-gray-800 mb-3 flex items-center\">\n                    <i class=\"fas fa-chart-line mr-2 text-blue-500\"></i>\n                    \u4E00\u5E74\u6536\u652F\u8D8B\u52BF\n                </h3>\n                <div class=\"h-64\">\n                    <canvas id=\"monthlyTrendChart\"></canvas>\n                </div>\n            </div>\n            \n            <!-- \u8D44\u4EA7\u6536\u76CA -->\n            <div class=\"bg-white rounded-lg p-4 shadow-sm mb-4\">\n                <h3 class=\"text-lg font-semibold text-gray-800 mb-3 flex items-center\">\n                    <i class=\"fas fa-trophy mr-2 text-yellow-500\"></i>\n                    \u8D44\u4EA7\u6536\u76CA\n                </h3>\n                <div class=\"h-64\">\n                    <canvas id=\"assetReturnsChart\"></canvas>\n                </div>\n            </div>\n            \n            <!-- \u8D44\u4EA7\u5206\u5E03\u56FE -->\n            <div class=\"bg-white rounded-lg p-4 shadow-sm mb-4\">\n                <h3 class=\"text-lg font-semibold text-gray-800 mb-3 flex items-center\">\n                    <i class=\"fas fa-pie-chart mr-2 text-orange-500\"></i>\n                    \u8D44\u4EA7\u5206\u5E03\n                </h3>\n                <div class=\"h-64\">\n                    <canvas id=\"assetDistributionChart\"></canvas>\n                </div>\n            </div>\n        </div>\n\n        <!-- \u8D44\u4EA7\u9875\u9762 -->\n        <div id=\"assetsPage\" class=\"page hidden\">\n            <div class=\"mb-4 flex justify-between items-center\">\n                <h2 class=\"text-xl font-bold text-gray-800\">\u6211\u7684\u8D44\u4EA7</h2>\n                <button id=\"addAssetBtn\" class=\"bg-blue-500 text-white px-4 py-2 rounded-lg text-sm flex items-center\">\n                    <i class=\"fas fa-plus mr-2\"></i>\u6DFB\u52A0\u8D44\u4EA7\n                </button>\n            </div>\n            <div id=\"assetsContainer\"></div>\n        </div>\n\n        <!-- \u8D1F\u503A\u9875\u9762 -->\n        <div id=\"liabilitiesPage\" class=\"page hidden\">\n            <div class=\"mb-4 flex justify-between items-center\">\n                <h2 class=\"text-xl font-bold text-gray-800\">\u6211\u7684\u8D1F\u503A</h2>\n                <button id=\"addLiabilityBtn\" class=\"bg-red-500 text-white px-4 py-2 rounded-lg text-sm flex items-center\">\n                    <i class=\"fas fa-plus mr-2\"></i>\u6DFB\u52A0\u8D1F\u503A\n                </button>\n            </div>\n            <div id=\"liabilitiesContainer\"></div>\n        </div>\n\n        <!-- \u8D44\u91D1\u6D41\u5165\u9875\u9762 -->\n        <div id=\"cashFlowPage\" class=\"page hidden\">\n            <div class=\"mb-4 flex justify-between items-center\">\n                <h2 class=\"text-xl font-bold text-gray-800\">\u8D44\u91D1\u6D41\u7BA1\u7406</h2>\n                <button id=\"addCashFlowBtn\" class=\"bg-purple-500 text-white px-4 py-2 rounded-lg text-sm flex items-center\">\n                    <i class=\"fas fa-plus mr-2\"></i>\u6DFB\u52A0\u8BB0\u5F55\n                </button>\n            </div>\n            \n            <!-- \u5207\u6362\u9009\u9879\u5361 -->\n            <div class=\"mb-4 bg-white rounded-lg p-1 shadow-sm\">\n                <div class=\"grid grid-cols-2 gap-1\">\n                    <button id=\"plannedFlowTab\" class=\"tab-btn active py-2 px-4 rounded-md text-sm font-medium transition-all\">\n                        <i class=\"fas fa-calendar-alt mr-1\"></i>\u9884\u671F\u6536\u652F\n                    </button>\n                    <button id=\"historicalFlowTab\" class=\"tab-btn py-2 px-4 rounded-md text-sm font-medium transition-all\">\n                        <i class=\"fas fa-history mr-1\"></i>\u5386\u53F2\u8BB0\u5F55\n                    </button>\n                </div>\n            </div>\n            \n            <!-- \u9884\u671F\u6536\u652F\u5185\u5BB9 -->\n            <div id=\"plannedFlowContent\">\n                <div id=\"cashFlowContainer\"></div>\n            </div>\n            \n            <!-- \u5386\u53F2\u8BB0\u5F55\u5185\u5BB9 -->\n            <div id=\"historicalFlowContent\" class=\"hidden\">\n                <!-- \u5386\u53F2\u73B0\u91D1\u6D41\u56FE\u8868 -->\n                <div class=\"bg-white rounded-lg p-4 shadow-sm mb-4\">\n                    <h3 class=\"text-lg font-semibold text-gray-800 mb-3 flex items-center\">\n                        <i class=\"fas fa-chart-line mr-2 text-blue-500\"></i>\n                        \u5386\u53F2\u6536\u652F\u8D8B\u52BF\n                    </h3>\n                    <div class=\"h-64\">\n                        <canvas id=\"historicalFlowChart\"></canvas>\n                    </div>\n                </div>\n                \n                <!-- \u5386\u53F2\u8BB0\u5F55\u5217\u8868 -->\n                <div class=\"bg-white rounded-lg p-4 shadow-sm\">\n                    <h3 class=\"text-lg font-semibold text-gray-800 mb-3 flex items-center\">\n                        <i class=\"fas fa-list mr-2 text-green-500\"></i>\n                        \u5386\u53F2\u4EA4\u6613\u8BB0\u5F55\n                    </h3>\n                    <div id=\"historicalFlowList\"></div>\n                </div>\n            </div>\n        </div>\n        \n        <!-- \u8BBE\u7F6E\u9875\u9762 -->\n        <div id=\"settingsPage\" class=\"page hidden\">\n            <div class=\"mb-4\">\n                <h2 class=\"text-xl font-bold text-gray-800\">\u8BBE\u7F6E</h2>\n            </div>\n            \n            <!-- \u7528\u6237\u4FE1\u606F -->\n            <div class=\"bg-white rounded-lg p-4 shadow-sm mb-4\">\n                <h3 class=\"text-lg font-semibold text-gray-800 mb-3 flex items-center\">\n                    <i class=\"fas fa-user mr-2 text-blue-500\"></i>\n                    \u7528\u6237\u4FE1\u606F\n                </h3>\n                <div class=\"space-y-4\">\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u7528\u6237\u540D</label>\n                        <input type=\"text\" id=\"usernameInput\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\" placeholder=\"\u8BF7\u8F93\u5165\u7528\u6237\u540D\">\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u624B\u673A\u53F7\u7801</label>\n                        <input type=\"tel\" id=\"phoneInput\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\" placeholder=\"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801\">\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u90AE\u7BB1</label>\n                        <input type=\"email\" id=\"emailInput\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\" placeholder=\"\u8BF7\u8F93\u5165\u90AE\u7BB1\">\n                    </div>\n                    <button id=\"saveUserInfoBtn\" class=\"w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 flex items-center justify-center\">\n                        <i class=\"fas fa-save mr-2\"></i>\n                        \u4FDD\u5B58\u4FE1\u606F\n                    </button>\n                </div>\n            </div>\n            \n            <!-- \u5E94\u7528\u8BBE\u7F6E -->\n            <div class=\"bg-white rounded-lg p-4 shadow-sm mb-4\">\n                <h3 class=\"text-lg font-semibold text-gray-800 mb-3 flex items-center\">\n                    <i class=\"fas fa-cog mr-2 text-gray-500\"></i>\n                    \u5E94\u7528\u8BBE\u7F6E\n                </h3>\n                <div class=\"space-y-3\">\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-gray-700\">\u6570\u636E\u5907\u4EFD</span>\n                        <button class=\"text-blue-500 hover:text-blue-600\">\n                            <i class=\"fas fa-download\"></i>\n                        </button>\n                    </div>\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-gray-700\">\u6570\u636E\u6E05\u7406</span>\n                        <button class=\"text-red-500 hover:text-red-600\">\n                            <i class=\"fas fa-trash\"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            \n            <!-- \u5173\u4E8E -->\n            <div class=\"bg-white rounded-lg p-4 shadow-sm\">\n                <h3 class=\"text-lg font-semibold text-gray-800 mb-3 flex items-center\">\n                    <i class=\"fas fa-info-circle mr-2 text-green-500\"></i>\n                    \u5173\u4E8E\n                </h3>\n                <div class=\"text-gray-600 space-y-2\">\n                    <p>\u4E2A\u4EBA\u8D44\u4EA7\u7EC4\u5408\u7BA1\u7406\u7CFB\u7EDF</p>\n                    <p>\u7248\u672C: 2.0.0</p>\n                    <p>\u6700\u540E\u66F4\u65B0: 2025-08-07</p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- \u6A21\u6001\u6846 -->\n    <div id=\"modal\" class=\"fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-end sm:items-center justify-center\">\n        <div id=\"modalContent\" class=\"bg-white w-full sm:w-96 sm:rounded-lg rounded-t-xl max-h-[80vh] overflow-y-auto\">\n            <!-- \u6A21\u6001\u6846\u5185\u5BB9\u5C06\u52A8\u6001\u63D2\u5165 -->\n        </div>\n    </div>\n\n    <!-- Toast \u901A\u77E5 -->\n    <div id=\"toast\" class=\"fixed top-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg transform transition-transform duration-300 translate-x-full z-50\">\n        <div class=\"flex items-center\">\n            <i class=\"fas fa-check-circle mr-2\"></i>\n            <span id=\"toastMessage\">\u64CD\u4F5C\u6210\u529F</span>\n        </div>\n    </div>\n    <script>\n        // \u5168\u5C40\u53D8\u91CF\n        let currentPage = 'dashboard';\n        let assetTypes = [];\n        let assets = [];\n        \n        // API\u5BA2\u6237\u7AEF\n        class ApiClient {\n            constructor() {\n                this.baseUrl = window.location.origin;\n            }\n            \n            async request(endpoint, options = {}) {\n                const url = \\`\\${this.baseUrl}/api\\${endpoint}\\`;\n                const config = {\n                    headers: {\n                        'Content-Type': 'application/json',\n                        ...options.headers,\n                    },\n                    ...options,\n                };\n                try {\n                    const response = await fetch(url, config);\n                    if (!response.ok) {\n                        throw new Error(\\`HTTP error! status: \\${response.status}\\`);\n                    }\n                    return await response.json();\n                } catch (error) {\n                    console.error('API request failed:', error);\n                    throw error;\n                }\n            }\n            \n            // \u4EEA\u8868\u677F\n            async getDashboardOverview() {\n                return this.request('/dashboard/overview');\n            }\n            \n            // \u8D44\u4EA7\u7C7B\u578B\n            async getAssetTypes() {\n                return this.request('/asset-types');\n            }\n            \n            async createAssetType(data) {\n                return this.request('/asset-types', {\n                    method: 'POST',\n                    body: JSON.stringify(data),\n                });\n            }\n            \n            async deleteAssetType(id) {\n                return this.request(\\`/asset-types/\\${id}\\`, {\n                    method: 'DELETE',\n                });\n            }\n            \n            // \u8D44\u4EA7\n            async getAssets() {\n                return this.request('/assets');\n            }\n            \n            async createAsset(data) {\n                return this.request('/assets', {\n                    method: 'POST',\n                    body: JSON.stringify(data),\n                });\n            }\n            \n            async deleteAsset(id) {\n                return this.request(\\`/assets/\\${id}\\`, {\n                    method: 'DELETE',\n                });\n            }\n            \n            // \u8D44\u91D1\u6D41\u5165\n            async getCashFlows() {\n                return this.request('/cash-flows');\n            }\n            \n            async createCashFlow(data) {\n                return this.request('/cash-flows', {\n                    method: 'POST',\n                    body: JSON.stringify(data),\n                });\n            }\n            \n            async deleteCashFlow(id) {\n                return this.request(\\`/cash-flows/\\${id}\\`, {\n                    method: 'DELETE',\n                });\n            }\n            \n            async updateCashFlow(id, data) {\n                return this.request(\\`/cash-flows/\\${id}\\`, {\n                    method: 'PUT',\n                    body: JSON.stringify(data),\n                });\n            }\n            \n            async updateAsset(id, data) {\n                return this.request(\\`/assets/\\${id}\\`, {\n                    method: 'PUT',\n                    body: JSON.stringify(data),\n                });\n            }\n            \n            async updateAssetType(id, data) {\n                return this.request(\\`/asset-types/\\${id}\\`, {\n                    method: 'PUT',\n                    body: JSON.stringify(data),\n                });\n            }\n            \n            // \u8D1F\u503A\n            async getLiabilities() {\n                return this.request('/liabilities');\n            }\n            \n            async createLiability(data) {\n                return this.request('/liabilities', {\n                    method: 'POST',\n                    body: JSON.stringify(data),\n                });\n            }\n            \n            async deleteLiability(id) {\n                return this.request('/liabilities/' + id, {\n                    method: 'DELETE',\n                });\n            }\n            \n            async updateLiability(id, data) {\n                return this.request('/liabilities/' + id, {\n                    method: 'PUT',\n                    body: JSON.stringify(data),\n                });\n            }\n            \n            // \u8D44\u4EA7\u5220\u9664\n            async deleteAsset(id) {\n                return this.request(\\`/assets/\\${id}\\`, {\n                    method: 'DELETE',\n                });\n            }\n            \n            // \u8D44\u4EA7\u7C7B\u578B\u5220\u9664\n            async deleteAssetType(id) {\n                return this.request(\\`/asset-types/\\${id}\\`, {\n                    method: 'DELETE',\n                });\n            }\n            \n            // \u7528\u6237\u4FE1\u606F\n            async getUserInfo() {\n                return this.request('/user/info');\n            }\n            \n            async updateUserInfo(data) {\n                return this.request('/user/info', {\n                    method: 'PUT',\n                    body: JSON.stringify(data),\n                });\n            }\n            \n            // \u5206\u6790\u6570\u636E\n            async getYearlyIncomeExpense() {\n                return this.request('/analytics/yearly-income-expense');\n            }\n            \n            async getMonthlyIncomeExpense() {\n                return this.request('/analytics/monthly-income-expense');\n            }\n            \n            async getAssetReturns() {\n                return this.request('/analytics/asset-returns');\n            }\n            \n            async getBalanceForecast() {\n                return this.request('/analytics/balance-forecast');\n            }\n            \n            // \u5386\u53F2\u6570\u636E\n            async getCashFlowHistory() {\n                return this.request('/cash-flows/history');\n            }\n            \n            async getHistoricalMonthlyFlow() {\n                return this.request('/analytics/historical-monthly-flow');\n            }\n            \n            async getAssetValueTrends() {\n                return this.request('/analytics/asset-value-trends');\n            }\n        }\n        \n        const apiClient = new ApiClient();\n        \n        // \u9875\u9762\u5BFC\u822A\n        function showPage(pageName) {\n            currentPage = pageName;\n            document.querySelectorAll('.page').forEach(page => {\n                page.classList.add('hidden');\n            });\n            document.getElementById(pageName + 'Page').classList.remove('hidden');\n            \n            document.querySelectorAll('.nav-tab').forEach(btn => {\n                btn.classList.remove('active');\n            });\n            // \u53EA\u6709\u5E95\u90E8\u5BFC\u822A\u7684\u9875\u9762\u624D\u9AD8\u4EAE\u6309\u94AE\n            const navBtn = document.getElementById(pageName + 'Btn');\n            if (navBtn) {\n                navBtn.classList.add('active');\n            }\n            \n            // \u52A0\u8F7D\u5BF9\u5E94\u9875\u9762\u6570\u636E\n            switch(pageName) {\n                case 'dashboard':\n                    loadDashboard();\n                    break;\n                case 'assets':\n                    loadAssets();\n                    break;\n                case 'liabilities':\n                    loadLiabilities();\n                    break;\n                case 'cashFlow':\n                    loadCashFlow();\n                    break;\n                case 'settings':\n                    loadSettings();\n                    break;\n            }\n        }\n        \n        // \u83DC\u5355\u5904\u7406\n        function initializeMenu() {\n            const menuBtn = document.getElementById('menuBtn');\n            const dropdownMenu = document.getElementById('dropdownMenu');\n            const assetTypesBtn = document.getElementById('assetTypesBtn');\n            \n            // \u83DC\u5355\u6309\u94AE\u70B9\u51FB\u4E8B\u4EF6\n            menuBtn.addEventListener('click', (e) => {\n                e.stopPropagation();\n                dropdownMenu.classList.toggle('hidden');\n            });\n            \n            // \u70B9\u51FB\u9875\u9762\u5176\u4ED6\u5730\u65B9\u5173\u95ED\u83DC\u5355\n            document.addEventListener('click', () => {\n                dropdownMenu.classList.add('hidden');\n            });\n            \n            // \u8D44\u4EA7\u7C7B\u578B\u7BA1\u7406\u6309\u94AE\n            assetTypesBtn.addEventListener('click', () => {\n                dropdownMenu.classList.add('hidden');\n                showAssetTypesManagement();\n            });\n            \n            // \u8BBE\u7F6E\u6309\u94AE\n            document.getElementById('settingsBtn').addEventListener('click', () => {\n                dropdownMenu.classList.add('hidden');\n                showPage('settings');\n            });\n        }\n        \n        // \u663E\u793AToast\n        function showToast(message, type = 'success') {\n            const toast = document.getElementById('toast');\n            const toastMessage = document.getElementById('toastMessage');\n            \n            toastMessage.textContent = message;\n            toast.className = \\`fixed top-4 right-4 px-4 py-3 rounded-lg shadow-lg transform transition-transform duration-300 z-50 \\${type === 'success' ? 'bg-green-500' : 'bg-red-500'} text-white\\`;\n            \n            setTimeout(() => {\n                toast.classList.add('translate-x-full');\n            }, 3000);\n        }\n        \n        // \u663E\u793A/\u9690\u85CF\u6A21\u6001\u6846\n        function showModal(content) {\n            document.getElementById('modalContent').innerHTML = content;\n            document.getElementById('modal').classList.remove('hidden');\n            document.body.style.overflow = 'hidden';\n        }\n        \n        function hideModal() {\n            document.getElementById('modal').classList.add('hidden');\n            document.body.style.overflow = 'auto';\n        }\n        \n        // \u52A0\u8F7D\u4EEA\u8868\u677F\n        async function loadDashboard() {\n            try {\n                // \u5E76\u884C\u52A0\u8F7D\u6570\u636E\n                const [userInfo, overview, balanceForecast] = await Promise.all([\n                    apiClient.getUserInfo(),\n                    apiClient.getDashboardOverview(),\n                    apiClient.getBalanceForecast()\n                ]);\n                \n                // \u66F4\u65B0\u7528\u6237\u4FE1\u606F\n                document.getElementById('username').textContent = userInfo.username || '\u672A\u77E5\u7528\u6237';\n                document.getElementById('lastLogin').textContent = userInfo.last_login ? \n                    new Date(userInfo.last_login).toLocaleDateString('zh-CN') : '\u4ECA\u5929';\n                \n                // \u66F4\u65B0\u8D44\u4EA7\u603B\u89C8\n                document.getElementById('totalAssets').textContent = \n                    '\uFFE5' + (overview.total_assets || 0).toLocaleString();\n                document.getElementById('totalLiabilities').textContent = \n                    '\uFFE5' + (overview.total_liabilities || 0).toLocaleString();\n                document.getElementById('netWorth').textContent = \n                    '\uFFE5' + (overview.net_worth || 0).toLocaleString();\n                \n                // \u66F4\u65B0\u6536\u652F\u9884\u8BA1\u548C\u5B9E\u9645\u5BF9\u6BD4\n                const plannedIncome = balanceForecast.planned?.income || 0;\n                const plannedExpense = balanceForecast.planned?.expense || 0;\n                const actualIncome = balanceForecast.actual?.income || 0;\n                const actualExpense = balanceForecast.actual?.expense || 0;\n                \n                document.getElementById('projectedIncome').textContent = '\uFFE5' + plannedIncome.toLocaleString();\n                document.getElementById('projectedExpense').textContent = '\uFFE5' + plannedExpense.toLocaleString();\n                document.getElementById('actualIncome').textContent = '\uFFE5' + actualIncome.toLocaleString();\n                document.getElementById('actualExpense').textContent = '\uFFE5' + actualExpense.toLocaleString();\n                \n                const plannedBalance = plannedIncome - plannedExpense;\n                const actualBalance = actualIncome - actualExpense;\n                const balanceStatus = document.getElementById('balanceStatus');\n                const balanceText = document.getElementById('balanceText');\n                \n                if (actualBalance > 0) {\n                    balanceStatus.className = 'mt-3 text-center p-2 rounded-lg bg-green-100';\n                    balanceText.textContent = '\u5B9E\u9645\u76C8\u4F59\uFFE5' + actualBalance.toLocaleString() + ' | \u9884\u8BA1\u76C8\u4F59\uFFE5' + plannedBalance.toLocaleString();\n                    balanceText.className = 'text-sm font-medium text-green-700';\n                } else if (actualBalance < 0) {\n                    balanceStatus.className = 'mt-3 text-center p-2 rounded-lg bg-red-100';\n                    balanceText.textContent = '\u5B9E\u9645\u4E8F\u635F\uFFE5' + Math.abs(actualBalance).toLocaleString() + ' | \u9884\u8BA1\u76C8\u4F59\uFFE5' + plannedBalance.toLocaleString();\n                    balanceText.className = 'text-sm font-medium text-red-700';\n                } else {\n                    balanceStatus.className = 'mt-3 text-center p-2 rounded-lg bg-gray-100';\n                    balanceText.textContent = '\u5B9E\u9645\u6536\u652F\u5E73\u8861 | \u9884\u8BA1\u76C8\u4F59\uFFE5' + plannedBalance.toLocaleString();\n                    balanceText.className = 'text-sm font-medium text-gray-700';\n                }\n                \n                // \u52A0\u8F7D\u56FE\u8868\n                await loadCharts();\n                \n            } catch (error) {\n                console.error('Failed to load dashboard:', error);\n                showToast('\u52A0\u8F7D\u4EEA\u8868\u677F\u6570\u636E\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u5168\u5C40\u56FE\u8868\u5B9E\u4F8B\n        let monthlyTrendChartInstance = null;\n        let assetDistributionChartInstance = null;\n        let assetReturnsChartInstance = null;\n        \n        // \u52A0\u8F7D\u56FE\u8868\n        async function loadCharts() {\n            try {\n                const [monthlyData, assetReturns, overview] = await Promise.all([\n                    apiClient.getMonthlyIncomeExpense(),\n                    apiClient.getAssetReturns(),\n                    apiClient.getDashboardOverview()\n                ]);\n                \n                // \u6E32\u67D3\u6708\u5EA6\u6536\u652F\u8D8B\u52BF\u56FE\uFF08\u533A\u5206\u5B9E\u9645\u548C\u9884\u671F\uFF09\n                renderMonthlyTrendChart(monthlyData);\n                \n                // \u6E32\u67D3\u8D44\u4EA7\u6536\u76CA\u56FE\n                renderAssetReturnsChart(assetReturns);\n                \n                // \u6E32\u67D3\u8D44\u4EA7\u5206\u5E03\u56FE\n                renderAssetDistributionChart(overview.assets_by_category || []);\n                \n            } catch (error) {\n                console.error('Failed to load charts:', error);\n            }\n        }\n        \n        // \u6E32\u67D3\u4E00\u5E74\u6536\u652F\u8D8B\u52BF\u56FE\uFF08\u533A\u5206\u5B9E\u9645\u548C\u9884\u671F\uFF09\n        function renderMonthlyTrendChart(data) {\n            const ctx = document.getElementById('monthlyTrendChart');\n            if (!ctx) return;\n            \n            // \u9500\u6BC1\u65E7\u7684\u56FE\u8868\u5B9E\u4F8B\n            if (monthlyTrendChartInstance) {\n                monthlyTrendChartInstance.destroy();\n            }\n            \n            // \u5904\u7406\u65B0\u7684\u6570\u636E\u683C\u5F0F\n            const currentMonth = data.currentMonth || 8; // \u5F53\u524D\u6708\u4EFD (1-12)\n            const actualData = data.actual || [];\n            const plannedData = data.planned || [];\n            \n            // \u751F\u6210 1-12 \u6708\u7684\u6807\u7B7E\n            const months = [];\n            const monthLabels = [];\n            for (let i = 1; i <= 12; i++) {\n                const monthStr = '2025-' + String(i).padStart(2, '0'); // \u4F7F\u75282025\u5E74\u6570\u636E\n                months.push(monthStr);\n                monthLabels.push(i + '\u6708');\n            }\n            \n            // \u521B\u5EFA\u8FDE\u7EED\u7684\u6536\u5165\u548C\u652F\u51FA\u6570\u636E\uFF08\u5305\u542B\u5B9E\u9645\u548C\u9884\u671F\uFF09\n            const incomeData = months.map((month, index) => {\n                const monthNum = index + 1;\n                if (monthNum < currentMonth) {\n                    // \u5F53\u524D\u6708\u4EFD\u4E4B\u524D\uFF1A\u4F7F\u7528\u5B9E\u9645\u6570\u636E\n                    const item = actualData.find(d => d.month === month && d.flow_type === 'income');\n                    return item ? item.total_amount : 0;\n                } else {\n                    // \u5F53\u524D\u6708\u4EFD\u53CA\u4E4B\u540E\uFF1A\u4F7F\u7528\u9884\u671F\u6570\u636E\n                    const item = plannedData.find(d => d.month === month && d.flow_type === 'income');\n                    return item ? item.total_amount : 0;\n                }\n            });\n            \n            const expenseData = months.map((month, index) => {\n                const monthNum = index + 1;\n                if (monthNum < currentMonth) {\n                    // \u5F53\u524D\u6708\u4EFD\u4E4B\u524D\uFF1A\u4F7F\u7528\u5B9E\u9645\u6570\u636E\n                    const item = actualData.find(d => d.month === month && d.flow_type === 'expense');\n                    return item ? item.total_amount : 0;\n                } else {\n                    // \u5F53\u524D\u6708\u4EFD\u53CA\u4E4B\u540E\uFF1A\u4F7F\u7528\u9884\u671F\u6570\u636E\n                    const item = plannedData.find(d => d.month === month && d.flow_type === 'expense');\n                    return item ? item.total_amount : 0;\n                }\n            });\n            \n            // \u521B\u5EFA\u5206\u6BB5\u6837\u5F0F\uFF1A\u5B9E\u9645\u6570\u636E\u90E8\u5206\u548C\u9884\u671F\u6570\u636E\u90E8\u5206\n            const actualIncomeData = incomeData.map((value, index) => index < currentMonth - 1 ? value : null); // \u53EA\u663E\u793A\u5DF2\u5B8C\u6210\u7684\u6708\u4EFD\n            const plannedIncomeData = incomeData.map((value, index) => index >= currentMonth - 2 ? value : null); // \u4ECE\u4E0A\u4E2A\u6708\u5F00\u59CB\u8FDE\u63A5\n            const actualExpenseData = expenseData.map((value, index) => index < currentMonth - 1 ? value : null); // \u53EA\u663E\u793A\u5DF2\u5B8C\u6210\u7684\u6708\u4EFD\n            const plannedExpenseData = expenseData.map((value, index) => index >= currentMonth - 2 ? value : null); // \u4ECE\u4E0A\u4E2A\u6708\u5F00\u59CB\u8FDE\u63A5\n            \n            monthlyTrendChartInstance = new Chart(ctx, {\n                type: 'line',\n                data: {\n                    labels: monthLabels, // \u4F7F\u75281-12\u6708\u6807\u7B7E\n                    datasets: [{\n                        label: '\u5B9E\u9645\u6536\u5165',\n                        data: actualIncomeData,\n                        borderColor: 'rgb(34, 197, 94)',\n                        backgroundColor: 'rgba(34, 197, 94, 0.1)',\n                        borderWidth: 2,\n                        tension: 0.4,\n                        spanGaps: true,\n                        pointRadius: 4\n                    }, {\n                        label: '\u9884\u671F\u6536\u5165',\n                        data: plannedIncomeData,\n                        borderColor: 'rgb(34, 197, 94)',\n                        backgroundColor: 'rgba(34, 197, 94, 0.05)',\n                        borderWidth: 2,\n                        borderDash: [5, 5], // \u865A\u7EBF\n                        tension: 0.4,\n                        spanGaps: true,\n                        pointRadius: 4\n                    }, {\n                        label: '\u5B9E\u9645\u652F\u51FA',\n                        data: actualExpenseData,\n                        borderColor: 'rgb(239, 68, 68)',\n                        backgroundColor: 'rgba(239, 68, 68, 0.1)',\n                        borderWidth: 2,\n                        tension: 0.4,\n                        spanGaps: true,\n                        pointRadius: 4\n                    }, {\n                        label: '\u9884\u671F\u652F\u51FA',\n                        data: plannedExpenseData,\n                        borderColor: 'rgb(239, 68, 68)',\n                        backgroundColor: 'rgba(239, 68, 68, 0.05)',\n                        borderWidth: 2,\n                        borderDash: [5, 5], // \u865A\u7EBF\n                        tension: 0.4,\n                        spanGaps: true,\n                        pointRadius: 4\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                        legend: {\n                            position: 'top'\n                        }\n                    },\n                    scales: {\n                        y: {\n                            beginAtZero: true,\n                            ticks: {\n                                callback: function(value) {\n                                    return '\uFFE5' + value.toLocaleString();\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n        }\n        \n        // \u6E32\u67D3\u8D44\u4EA7\u5206\u5E03\u56FE\n        function renderAssetDistributionChart(data) {\n            console.log('renderAssetDistributionChart called with data:', data);\n            const ctx = document.getElementById('assetDistributionChart');\n            if (!ctx) {\n                console.error('assetDistributionChart canvas not found');\n                return;\n            }\n            \n            if (!data || !data.length) {\n                console.log('No asset distribution data, showing empty chart');\n                // \u663E\u793A\u7A7A\u56FE\u8868\n                if (assetDistributionChartInstance) {\n                    assetDistributionChartInstance.destroy();\n                }\n                assetDistributionChartInstance = new Chart(ctx, {\n                    type: 'doughnut',\n                    data: {\n                        labels: ['\u6682\u65E0\u6570\u636E'],\n                        datasets: [{\n                            data: [1],\n                            backgroundColor: ['rgba(156, 163, 175, 0.8)'],\n                            borderWidth: 2,\n                            borderColor: '#ffffff'\n                        }]\n                    },\n                    options: {\n                        responsive: true,\n                        maintainAspectRatio: false,\n                        plugins: {\n                            legend: {\n                                display: false\n                            }\n                        }\n                    }\n                });\n                return;\n            }\n            \n            // \u9500\u6BC1\u65E7\u7684\u56FE\u8868\u5B9E\u4F8B\n            if (assetDistributionChartInstance) {\n                assetDistributionChartInstance.destroy();\n            }\n            \n            const colors = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#06B6D4'];\n            \n            assetDistributionChartInstance = new Chart(ctx, {\n                type: 'doughnut',\n                data: {\n                    labels: data.map(item => item.category),\n                    datasets: [{\n                        data: data.map(item => item.total_value),\n                        backgroundColor: colors.slice(0, data.length),\n                        borderWidth: 2,\n                        borderColor: '#ffffff'\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                        legend: {\n                            position: 'bottom'\n                        },\n                        tooltip: {\n                            callbacks: {\n                                label: function(context) {\n                                    return context.label + ': \uFFE5' + context.parsed.toLocaleString();\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n        }\n        \n        // \u6E32\u67D3\u8D44\u4EA7\u6536\u76CA\u5BF9\u6BD4\u56FE\uFF08\u57FA\u4E8E\u6210\u672C\u548C\u73B0\u4EF7\uFF09\n        function renderAssetReturnsChart(data) {\n            console.log('renderAssetReturnsChart called with data:', data);\n            const ctx = document.getElementById('assetReturnsChart');\n            if (!ctx) {\n                console.error('assetReturnsChart canvas not found');\n                return;\n            }\n            \n            if (!data || !data.length) {\n                console.log('No asset returns data, showing empty chart');\n                // \u663E\u793A\u7A7A\u56FE\u8868\n                if (assetReturnsChartInstance) {\n                    assetReturnsChartInstance.destroy();\n                }\n                assetReturnsChartInstance = new Chart(ctx, {\n                    type: 'bar',\n                    data: {\n                        labels: ['\u6682\u65E0\u6570\u636E'],\n                        datasets: [{\n                            label: '\u6536\u76CA\u7387(%)',\n                            data: [0],\n                            backgroundColor: 'rgba(156, 163, 175, 0.8)',\n                            borderColor: 'rgb(156, 163, 175)',\n                            borderWidth: 1\n                        }]\n                    },\n                    options: {\n                        responsive: true,\n                        maintainAspectRatio: false,\n                        plugins: {\n                            legend: {\n                                display: false\n                            }\n                        },\n                        scales: {\n                            y: {\n                                beginAtZero: true,\n                                ticks: {\n                                    callback: function(value) {\n                                        return value + '%';\n                                    }\n                                }\n                            }\n                        }\n                    }\n                });\n                return;\n            }\n            \n            // \u9500\u6BC1\u65E7\u7684\u56FE\u8868\u5B9E\u4F8B\n            if (assetReturnsChartInstance) {\n                assetReturnsChartInstance.destroy();\n            }\n            \n            // \u6309\u6536\u76CA\u7387\u6392\u5E8F\n            const sortedData = data.sort((a, b) => b.return_rate - a.return_rate);\n            \n            assetReturnsChartInstance = new Chart(ctx, {\n                type: 'bar',\n                data: {\n                    labels: sortedData.map(item => item.asset_name),\n                    datasets: [{\n                        label: '\u6536\u76CA\u7387(%)',\n                        data: sortedData.map(item => item.return_rate),\n                        backgroundColor: sortedData.map(item => \n                            item.return_rate >= 0 ? 'rgba(34, 197, 94, 0.8)' : 'rgba(239, 68, 68, 0.8)'\n                        ),\n                        borderColor: sortedData.map(item => \n                            item.return_rate >= 0 ? 'rgb(34, 197, 94)' : 'rgb(239, 68, 68)'\n                        ),\n                        borderWidth: 1\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                        legend: {\n                            display: false\n                        },\n                        tooltip: {\n                            callbacks: {\n                                label: function(context) {\n                                    const item = sortedData[context.dataIndex];\n                                    return [\n                                        '\u6536\u76CA\u7387: ' + item.return_rate + '%',\n                                        '\u6210\u672C\u4EF7: \uFFE5' + item.cost_price.toLocaleString(),\n                                        '\u73B0\u4EF7: \uFFE5' + item.current_price.toLocaleString(),\n                                        '\u76C8\u4E8F: \uFFE5' + item.profit_loss.toLocaleString()\n                                    ];\n                                }\n                            }\n                        }\n                    },\n                    scales: {\n                        y: {\n                            beginAtZero: true,\n                            ticks: {\n                                callback: function(value) {\n                                    return value + '%';\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n        }\n        \n        // \u52A0\u8F7Ddashboard\u8D44\u4EA7\u5217\u8868\n        async function loadDashboardAssets() {\n            try {\n                const assets = await apiClient.getAssets();\n                const limitedAssets = assets.slice(0, 5); // \u53EA\u663E\u793A\u524D5\u4E2A\n                \n                if (limitedAssets.length === 0) {\n                    document.getElementById('dashboardAssetsContainer').innerHTML = '<p class=\"text-gray-500 text-sm\">\u6682\u65E0\u8D44\u4EA7\u8BB0\u5F55</p>';\n                    return;\n                }\n                \n                document.getElementById('dashboardAssetsContainer').innerHTML = limitedAssets.map(asset => \\`\n                    <div class=\"flex justify-between items-center py-2 border-b border-gray-100 last:border-0\">\n                        <div>\n                            <h4 class=\"font-medium text-gray-800\">\\${asset.name}</h4>\n                            <p class=\"text-sm text-gray-500\">\\${asset.asset_type_name || '\u672A\u5206\u7C7B'}</p>\n                        </div>\n                        <div class=\"text-right\">\n                            <span class=\"font-bold text-blue-600\">\uFFE5\\${asset.current_value.toLocaleString()}</span>\n                            <button onclick=\"editAsset(\\${asset.id})\" class=\"ml-2 text-gray-400 hover:text-blue-500\">\n                                <i class=\"fas fa-edit text-sm\"></i>\n                            </button>\n                        </div>\n                    </div>\n                \\`).join('');\n            } catch (error) {\n                console.error('Failed to load dashboard assets:', error);\n                document.getElementById('dashboardAssetsContainer').innerHTML = '<p class=\"text-red-500 text-sm\">\u52A0\u8F7D\u5931\u8D25</p>';\n            }\n        }\n        \n        // \u52A0\u8F7Ddashboard\u8D44\u4EA7\u7C7B\u578B\u5217\u8868\n        async function loadDashboardAssetTypes() {\n            try {\n                const assetTypes = await apiClient.getAssetTypes();\n                const limitedTypes = assetTypes.slice(0, 6); // \u53EA\u663E\u793A\u524D6\u4E2A\n                \n                if (limitedTypes.length === 0) {\n                    document.getElementById('dashboardTypesContainer').innerHTML = '<p class=\"text-gray-500 text-sm\">\u6682\u65E0\u8D44\u4EA7\u7C7B\u578B</p>';\n                    return;\n                }\n                \n                const groupedTypes = limitedTypes.reduce((acc, type) => {\n                    if (!acc[type.category]) acc[type.category] = [];\n                    acc[type.category].push(type);\n                    return acc;\n                }, {});\n                \n                document.getElementById('dashboardTypesContainer').innerHTML = Object.entries(groupedTypes).map(([category, types]) => \\`\n                    <div class=\"mb-3 last:mb-0\">\n                        <h4 class=\"text-sm font-semibold text-gray-700 mb-2 flex items-center\">\n                            <i class=\"fas \\${getCategoryIcon(category)} mr-2 text-blue-500\"></i>\n                            \\${getCategoryName(category)} (\\${types.length}\u9879)\n                        </h4>\n                        <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\n                            \\${types.map(type => \\`\n                                <div class=\"bg-gray-50 rounded-lg p-2 text-sm\">\n                                    <div class=\"flex justify-between items-center\">\n                                        <span class=\"font-medium text-gray-800\">\\${type.name}</span>\n                                        <button onclick=\"editAssetType(\\${type.id})\" class=\"text-gray-400 hover:text-blue-500\">\n                                            <i class=\"fas fa-edit text-xs\"></i>\n                                        </button>\n                                    </div>\n                                    \\${type.description ? \\`<p class=\"text-gray-500 text-xs mt-1\">\\${type.description}</p>\\` : ''}\n                                    \\${type.has_depreciation ? \\`<p class=\"text-orange-500 text-xs\">\u6298\u65E7\u7387: \\${type.depreciation_rate}%</p>\\` : ''}\n                                </div>\n                            \\`).join('')}\n                        </div>\n                    </div>\n                \\`).join('');\n            } catch (error) {\n                console.error('Failed to load dashboard asset types:', error);\n                document.getElementById('dashboardTypesContainer').innerHTML = '<p class=\"text-red-500 text-sm\">\u52A0\u8F7D\u5931\u8D25</p>';\n            }\n        }\n        \n        // \u52A0\u8F7D\u8D44\u4EA7\u7C7B\u578B\n        async function loadAssetTypes() {\n            try {\n                assetTypes = await apiClient.getAssetTypes();\n                \n                const groupedTypes = assetTypes.reduce((acc, type) => {\n                    if (!acc[type.category]) acc[type.category] = [];\n                    acc[type.category].push(type);\n                    return acc;\n                }, {});\n                \n                document.getElementById('typesContainer').innerHTML = Object.entries(groupedTypes).map(([category, types]) => \\`\n                    <div class=\"mb-6\">\n                        <h3 class=\"text-lg font-semibold text-gray-800 mb-3 flex items-center\">\n                            <i class=\"fas \\${getCategoryIcon(category)} mr-2 text-blue-500\"></i>\n                            \\${getCategoryName(category)} (\\${types.length}\u9879)\n                        </h3>\n                        <div class=\"space-y-2\">\n                            \\${types.map(type => \\`\n                                <div class=\"bg-white rounded-lg p-4 shadow-sm flex justify-between items-center\">\n                                    <div>\n                                        <h4 class=\"font-medium text-gray-800\">\\${type.name}</h4>\n                                        <p class=\"text-sm text-gray-500\">\\${type.description || '\u6682\u65E0\u63CF\u8FF0'}</p>\n                                        \\${type.has_depreciation ? \\`<p class=\"text-xs text-orange-500 mt-1\">\u6298\u65E7\u7387: \\${(type.depreciation_rate * 100).toFixed(1)}%</p>\\` : ''}\n                                    </div>\n                                    <button onclick=\"deleteAssetType(\\${type.id})\" class=\"text-red-500 hover:text-red-700 p-2\">\n                                        <i class=\"fas fa-trash\"></i>\n                                    </button>\n                                </div>\n                            \\`).join('')}\n                        </div>\n                    </div>\n                \\`).join('');\n            } catch (error) {\n                console.error('Failed to load asset types:', error);\n                showToast('\u52A0\u8F7D\u8D44\u4EA7\u7C7B\u578B\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u52A0\u8F7D\u8D44\u4EA7\n        async function loadAssets() {\n            try {\n                assets = await apiClient.getAssets();\n                \n                if (assets.length === 0) {\n                    document.getElementById('assetsContainer').innerHTML = \\`\n                        <div class=\"text-center py-8 text-gray-500\">\n                            <i class=\"fas fa-coins text-4xl mb-4\"></i>\n                            <p class=\"mb-4\">\u8FD8\u6CA1\u6709\u6DFB\u52A0\u4EFB\u4F55\u8D44\u4EA7</p>\n                            <button onclick=\"document.getElementById('addAssetBtn').click()\" class=\"bg-blue-500 text-white px-6 py-3 rounded-lg\">\n                                <i class=\"fas fa-plus mr-2\"></i>\u6DFB\u52A0\u7B2C\u4E00\u4E2A\u8D44\u4EA7\n                            </button>\n                        </div>\n                    \\`;\n                    return;\n                }\n                \n                document.getElementById('assetsContainer').innerHTML = assets.map(asset => \\`\n                    <div class=\"bg-white rounded-lg p-4 shadow-sm mb-3 flex justify-between items-center\">\n                        <div class=\"flex-1\">\n                            <h4 class=\"font-medium text-gray-800\">\\${asset.name}</h4>\n                            <p class=\"text-sm text-gray-500\">\\${asset.type_name || '\u672A\u77E5\u7C7B\u578B'}</p>\n                            <p class=\"text-lg font-bold text-green-600\">\uFFE5\\${(asset.current_value || 0).toLocaleString()}</p>\n                        </div>\n                        <button onclick=\"deleteAsset(\\${asset.id})\" class=\"text-red-500 hover:text-red-700 p-2\">\n                            <i class=\"fas fa-trash\"></i>\n                        </button>\n                    </div>\n                \\`).join('');\n            } catch (error) {\n                console.error('Failed to load assets:', error);\n                showToast('\u52A0\u8F7D\u8D44\u4EA7\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u52A0\u8F7D\u8D44\u4EA7\u5217\u8868\n        async function loadAssets() {\n            try {\n                const assets = await apiClient.getAssets();\n                \n                if (assets.length === 0) {\n                    document.getElementById('assetsContainer').innerHTML = \\`\n                        <div class=\"text-center py-8 text-gray-500\">\n                            <i class=\"fas fa-coins text-4xl mb-4\"></i>\n                            <p>\u6682\u65E0\u8D44\u4EA7\u8BB0\u5F55</p>\n                            <p class=\"text-sm\">\u70B9\u51FB\u4E0A\u65B9\u6309\u94AE\u6DFB\u52A0\u60A8\u7684\u7B2C\u4E00\u4E2A\u8D44\u4EA7</p>\n                        </div>\n                    \\`;\n                    return;\n                }\n                \n                document.getElementById('assetsContainer').innerHTML = assets.map(asset => \\`\n                    <div class=\"bg-white rounded-lg p-4 shadow-sm mb-3 flex justify-between items-center\">\n                        <div class=\"flex-1\">\n                            <h4 class=\"font-medium text-gray-800\">\\${asset.name}</h4>\n                            <p class=\"text-sm text-gray-500\">\\${asset.asset_type_name || '\u672A\u5206\u7C7B'}</p>\n                            <p class=\"text-lg font-bold text-green-600\">\uFFE5\\${asset.current_value.toLocaleString()}</p>\n                        </div>\n                        <div class=\"flex space-x-2\">\n                            <button onclick=\"editAsset(\\${asset.id})\" class=\"text-blue-500 hover:text-blue-700 p-2\">\n                                <i class=\"fas fa-edit\"></i>\n                            </button>\n                            <button onclick=\"deleteAsset(\\${asset.id})\" class=\"text-red-500 hover:text-red-700 p-2\">\n                                <i class=\"fas fa-trash\"></i>\n                            </button>\n                        </div>\n                    </div>\n                \\`).join('');\n                \n            } catch (error) {\n                console.error('Failed to load assets:', error);\n                showToast('\u52A0\u8F7D\u8D44\u4EA7\u5217\u8868\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u52A0\u8F7D\u8D1F\u503A\u5217\u8868\n        async function loadLiabilities() {\n            try {\n                const liabilities = await apiClient.getLiabilities();\n                \n                if (liabilities.length === 0) {\n                    document.getElementById('liabilitiesContainer').innerHTML = \\`\n                        <div class=\"text-center py-8 text-gray-500\">\n                            <i class=\"fas fa-credit-card text-4xl mb-4\"></i>\n                            <p>\u6682\u65E0\u8D1F\u503A\u8BB0\u5F55</p>\n                            <p class=\"text-sm\">\u70B9\u51FB\u4E0A\u65B9\u6309\u94AE\u6DFB\u52A0\u60A8\u7684\u7B2C\u4E00\u7B14\u8D1F\u503A</p>\n                        </div>\n                    \\`;\n                    return;\n                }\n                \n                document.getElementById('liabilitiesContainer').innerHTML = liabilities.map(liability => \\`\n                    <div class=\"bg-white rounded-lg p-4 shadow-sm mb-3\">\n                        <div class=\"flex justify-between items-start mb-2\">\n                            <div class=\"flex-1\">\n                                <h4 class=\"font-medium text-gray-800\">\\${liability.name}</h4>\n                                <p class=\"text-sm text-gray-500\">\\${liability.type || '\u672A\u5206\u7C7B'}</p>\n                            </div>\n                            <div class=\"flex space-x-2\">\n                                <button onclick=\"editLiability(\\${liability.id})\" class=\"text-blue-500 hover:text-blue-700 p-2\">\n                                    <i class=\"fas fa-edit\"></i>\n                                </button>\n                                <button onclick=\"deleteLiability(\\${liability.id})\" class=\"text-red-500 hover:text-red-700 p-2\">\n                                    <i class=\"fas fa-trash\"></i>\n                                </button>\n                            </div>\n                        </div>\n                        <div class=\"grid grid-cols-2 gap-4 text-sm\">\n                            <div>\n                                <span class=\"text-gray-500\">\u5269\u4F59\u91D1\u989D:</span>\n                                <span class=\"font-bold text-red-600\">\uFFE5\\${liability.remaining_amount.toLocaleString()}</span>\n                            </div>\n                            <div>\n                                <span class=\"text-gray-500\">\u5229\u7387:</span>\n                                <span class=\"font-medium\">\\${(liability.interest_rate * 100).toFixed(2)}%</span>\n                            </div>\n                            \\${liability.monthly_payment ? \\`\n                            <div>\n                                <span class=\"text-gray-500\">\u6708\u8FD8\u6B3E:</span>\n                                <span class=\"font-medium\">\uFFE5\\${liability.monthly_payment.toLocaleString()}</span>\n                            </div>\n                            \\` : ''}\n                            \\${liability.end_date ? \\`\n                            <div>\n                                <span class=\"text-gray-500\">\u5230\u671F\u65E5\u671F:</span>\n                                <span class=\"font-medium\">\\${liability.end_date}</span>\n                            </div>\n                            \\` : ''}\n                        </div>\n                    </div>\n                \\`).join('');\n                \n            } catch (error) {\n                console.error('Failed to load liabilities:', error);\n                showToast('\u52A0\u8F7D\u8D1F\u503A\u5217\u8868\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u52A0\u8F7D\u8D44\u91D1\u6D41\u5165\n        async function loadCashFlow() {\n            try {\n                // \u521D\u59CB\u5316\u9009\u9879\u5361\u4E8B\u4EF6\n                initializeCashFlowTabs();\n                \n                // \u52A0\u8F7D\u9884\u671F\u6536\u652F\u6570\u636E\n                await loadPlannedCashFlow();\n                \n            } catch (error) {\n                console.error('Failed to load cash flow:', error);\n                showToast('\u52A0\u8F7D\u8D44\u91D1\u6D41\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u521D\u59CB\u5316\u73B0\u91D1\u6D41\u9009\u9879\u5361\n        function initializeCashFlowTabs() {\n            const plannedTab = document.getElementById('plannedFlowTab');\n            const historicalTab = document.getElementById('historicalFlowTab');\n            const plannedContent = document.getElementById('plannedFlowContent');\n            const historicalContent = document.getElementById('historicalFlowContent');\n            \n            // \u9009\u9879\u5361\u5207\u6362\u4E8B\u4EF6\n            plannedTab.addEventListener('click', () => {\n                plannedTab.classList.add('active');\n                historicalTab.classList.remove('active');\n                plannedContent.classList.remove('hidden');\n                historicalContent.classList.add('hidden');\n                loadPlannedCashFlow();\n            });\n            \n            historicalTab.addEventListener('click', () => {\n                historicalTab.classList.add('active');\n                plannedTab.classList.remove('active');\n                historicalContent.classList.remove('hidden');\n                plannedContent.classList.add('hidden');\n                loadHistoricalCashFlow();\n            });\n        }\n        \n        // \u52A0\u8F7D\u9884\u671F\u73B0\u91D1\u6D41\n        async function loadPlannedCashFlow() {\n            try {\n                const cashFlows = await apiClient.getCashFlows();\n                \n                if (cashFlows.length === 0) {\n                    document.getElementById('cashFlowContainer').innerHTML = \\`\n                        <div class=\"text-center py-8 text-gray-500\">\n                            <i class=\"fas fa-chart-line text-4xl mb-4\"></i>\n                            <p class=\"mb-4\">\u8FD8\u6CA1\u6709\u6DFB\u52A0\u4EFB\u4F55\u8D44\u91D1\u6D41\u5165\u8BB0\u5F55</p>\n                            <button onclick=\"document.getElementById('addCashFlowBtn').click()\" class=\"bg-purple-500 text-white px-6 py-3 rounded-lg\">\n                                <i class=\"fas fa-plus mr-2\"></i>\u6DFB\u52A0\u7B2C\u4E00\u6761\u8BB0\u5F55\n                            </button>\n                        </div>\n                    \\`;\n                    return;\n                }\n                \n                // \u6309\u7C7B\u578B\u5206\u7EC4\n                const groupedFlows = {\n                    'one_time_income': [],\n                    'one_time_expense': [],\n                    'recurring_income': [],\n                    'recurring_expense': []\n                };\n                \n                cashFlows.forEach(flow => {\n                    const key = flow.is_recurring ? \n                        (flow.type === 'income' ? 'recurring_income' : 'recurring_expense') :\n                        (flow.type === 'income' ? 'one_time_income' : 'one_time_expense');\n                    groupedFlows[key].push(flow);\n                });\n                \n                document.getElementById('cashFlowContainer').innerHTML = \\`\n                    <div class=\"space-y-6\">\n                        <!-- \u9884\u671F\u6536\u5165 -->\n                        <div class=\"bg-white rounded-lg p-4 shadow-sm\">\n                            <h3 class=\"text-lg font-semibold text-blue-600 mb-3 flex items-center\">\n                                <i class=\"fas fa-sync mr-2\"></i>\u9884\u671F\u6536\u5165 (\\${groupedFlows.recurring_income.length}\u9879)\n                                <span class=\"text-sm text-gray-500 ml-2\">\u6BD4\u5982\u5DE5\u8D44</span>\n                            </h3>\n                            <div class=\"space-y-2\">\n                                \\${groupedFlows.recurring_income.map(flow => renderCashFlowItem(flow)).join('')}\n                                \\${groupedFlows.recurring_income.length === 0 ? '<p class=\"text-gray-500 text-sm\">\u6682\u65E0\u8BB0\u5F55</p>' : ''}\n                            </div>\n                        </div>\n                        \n                        <!-- \u9884\u671F\u652F\u51FA -->\n                        <div class=\"bg-white rounded-lg p-4 shadow-sm\">\n                            <h3 class=\"text-lg font-semibold text-orange-600 mb-3 flex items-center\">\n                                <i class=\"fas fa-calendar-alt mr-2\"></i>\u9884\u671F\u652F\u51FA (\\${groupedFlows.recurring_expense.length}\u9879)\n                                <span class=\"text-sm text-gray-500 ml-2\">\u6BD4\u5982\u623F\u8D37</span>\n                            </h3>\n                            <div class=\"space-y-2\">\n                                \\${groupedFlows.recurring_expense.map(flow => renderCashFlowItem(flow)).join('')}\n                                \\${groupedFlows.recurring_expense.length === 0 ? '<p class=\"text-gray-500 text-sm\">\u6682\u65E0\u8BB0\u5F55</p>' : ''}\n                            </div>\n                        </div>\n                        \n                        <!-- \u4E00\u6B21\u6027\u6536\u5165 -->\n                        <div class=\"bg-white rounded-lg p-4 shadow-sm\">\n                            <h3 class=\"text-lg font-semibold text-green-600 mb-3 flex items-center\">\n                                <i class=\"fas fa-arrow-up mr-2\"></i>\u4E00\u6B21\u6027\u6536\u5165 (\\${groupedFlows.one_time_income.length}\u9879)\n                            </h3>\n                            <div class=\"space-y-2\">\n                                \\${groupedFlows.one_time_income.map(flow => renderCashFlowItem(flow)).join('')}\n                                \\${groupedFlows.one_time_income.length === 0 ? '<p class=\"text-gray-500 text-sm\">\u6682\u65E0\u8BB0\u5F55</p>' : ''}\n                            </div>\n                        </div>\n                        \n                        <!-- \u4E00\u6B21\u6027\u652F\u51FA -->\n                        <div class=\"bg-white rounded-lg p-4 shadow-sm\">\n                            <h3 class=\"text-lg font-semibold text-red-600 mb-3 flex items-center\">\n                                <i class=\"fas fa-arrow-down mr-2\"></i>\u4E00\u6B21\u6027\u652F\u51FA (\\${groupedFlows.one_time_expense.length}\u9879)\n                            </h3>\n                            <div class=\"space-y-2\">\n                                \\${groupedFlows.one_time_expense.map(flow => renderCashFlowItem(flow)).join('')}\n                                \\${groupedFlows.one_time_expense.length === 0 ? '<p class=\"text-gray-500 text-sm\">\u6682\u65E0\u8BB0\u5F55</p>' : ''}\n                            </div>\n                        </div>\n                    </div>\n                \\`;\n            } catch (error) {\n                console.error('Failed to load cash flows:', error);\n                showToast('\u52A0\u8F7D\u8D44\u91D1\u6D41\u5165\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u6E32\u67D3\u8D44\u91D1\u6D41\u5165\u9879\u76EE\n        function renderCashFlowItem(flow) {\n            const isIncome = flow.type === 'income';\n            const colorClass = isIncome ? 'text-green-600' : 'text-red-600';\n            const iconClass = isIncome ? 'fa-plus-circle' : 'fa-minus-circle';\n            const recurringText = flow.is_recurring ? \\`(\u6BCF\\${getRecurringText(flow.recurring_type)})\\` : '';\n            \n            return \\`\n                <div class=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg\">\n                    <div class=\"flex items-center\">\n                        <i class=\"fas \\${iconClass} \\${colorClass} mr-3\"></i>\n                        <div>\n                            <h4 class=\"font-medium text-gray-800\">\\${flow.description}</h4>\n                            <p class=\"text-sm text-gray-500\">\n                                \\${flow.date} \\${recurringText}\n                                \\${flow.category ? \\` \u00B7 \\${flow.category}\\` : ''}\n                            </p>\n                        </div>\n                    </div>\n                    <div class=\"flex items-center\">\n                        <span class=\"font-bold \\${colorClass} mr-2\">\n                            \\${isIncome ? '+' : '-'}\uFFE5\\${Math.abs(flow.amount).toLocaleString()}\n                        </span>\n                        <button onclick=\"editCashFlow(\\${flow.id})\" class=\"text-gray-400 hover:text-blue-500 p-1 mr-1\">\n                            <i class=\"fas fa-edit text-sm\"></i>\n                        </button>\n                        <button onclick=\"deleteCashFlow(\\${flow.id})\" class=\"text-gray-400 hover:text-red-500 p-1\">\n                            <i class=\"fas fa-trash text-sm\"></i>\n                        </button>\n                    </div>\n                </div>\n            \\`;\n        }\n        \n        // \u83B7\u53D6\u5B9A\u671F\u7C7B\u578B\u6587\u672C\n        function getRecurringText(type) {\n            const texts = {\n                'daily': '\u5929',\n                'weekly': '\u5468',\n                'monthly': '\u6708',\n                'quarterly': '\u5B63\u5EA6',\n                'yearly': '\u5E74'\n            };\n            return texts[type] || type;\n        }\n        \n        // \u5168\u5C40\u5386\u53F2\u73B0\u91D1\u6D41\u56FE\u8868\u5B9E\u4F8B\n        let historicalFlowChartInstance = null;\n        \n        // \u52A0\u8F7D\u5386\u53F2\u73B0\u91D1\u6D41\u6570\u636E\n        async function loadHistoricalCashFlow() {\n            try {\n                const [historyData, monthlyData] = await Promise.all([\n                    apiClient.getCashFlowHistory(),\n                    apiClient.getHistoricalMonthlyFlow()\n                ]);\n                \n                // \u6E32\u67D3\u5386\u53F2\u73B0\u91D1\u6D41\u56FE\u8868\n                renderHistoricalFlowChart(monthlyData);\n                \n                // \u6E32\u67D3\u5386\u53F2\u8BB0\u5F55\u5217\u8868\n                renderHistoricalFlowList(historyData);\n                \n            } catch (error) {\n                console.error('Failed to load historical cash flow:', error);\n                showToast('\u52A0\u8F7D\u5386\u53F2\u6570\u636E\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u6E32\u67D3\u5386\u53F2\u73B0\u91D1\u6D41\u56FE\u8868\n        function renderHistoricalFlowChart(data) {\n            const ctx = document.getElementById('historicalFlowChart');\n            if (!ctx) return;\n            \n            // \u9500\u6BC1\u65E7\u7684\u56FE\u8868\u5B9E\u4F8B\n            if (historicalFlowChartInstance) {\n                historicalFlowChartInstance.destroy();\n            }\n            \n            // \u6570\u636E\u5904\u7406\n            const months = [...new Set(data.map(item => item.month))].sort().slice(-12);\n            const incomeData = months.map(month => {\n                const item = data.find(d => d.month === month && d.type === 'income');\n                return item ? item.total_amount : 0;\n            });\n            const expenseData = months.map(month => {\n                const item = data.find(d => d.month === month && d.type === 'expense');\n                return item ? item.total_amount : 0;\n            });\n            \n            historicalFlowChartInstance = new Chart(ctx, {\n                type: 'line',\n                data: {\n                    labels: months.map(m => m.substring(5)), // \u53EA\u663E\u793A\u6708\u4EFD\n                    datasets: [{\n                        label: '\u5B9E\u9645\u6536\u5165',\n                        data: incomeData,\n                        borderColor: 'rgb(34, 197, 94)',\n                        backgroundColor: 'rgba(34, 197, 94, 0.1)',\n                        tension: 0.4,\n                        fill: true\n                    }, {\n                        label: '\u5B9E\u9645\u652F\u51FA',\n                        data: expenseData,\n                        borderColor: 'rgb(239, 68, 68)',\n                        backgroundColor: 'rgba(239, 68, 68, 0.1)',\n                        tension: 0.4,\n                        fill: true\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    scales: {\n                        y: {\n                            beginAtZero: true,\n                            ticks: {\n                                callback: function(value) {\n                                    return '\uFFE5' + value.toLocaleString();\n                                }\n                            }\n                        }\n                    },\n                    plugins: {\n                        legend: {\n                            position: 'top'\n                        },\n                        tooltip: {\n                            callbacks: {\n                                label: function(context) {\n                                    return context.dataset.label + ': \uFFE5' + context.parsed.y.toLocaleString();\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n        }\n        \n        // \u6E32\u67D3\u5386\u53F2\u8BB0\u5F55\u5217\u8868\n        function renderHistoricalFlowList(data) {\n            const container = document.getElementById('historicalFlowList');\n            if (!container) return;\n            \n            if (data.length === 0) {\n                container.innerHTML = \\`\n                    <div class=\"text-center py-8 text-gray-500\">\n                        <i class=\"fas fa-history text-4xl mb-4\"></i>\n                        <p>\u6682\u65E0\u5386\u53F2\u8BB0\u5F55</p>\n                    </div>\n                \\`;\n                return;\n            }\n            \n            // \u6309\u6708\u4EFD\u5206\u7EC4\n            const groupedData = data.reduce((acc, item) => {\n                const month = item.actual_date.substring(0, 7);\n                if (!acc[month]) acc[month] = [];\n                acc[month].push(item);\n                return acc;\n            }, {});\n            \n            container.innerHTML = Object.entries(groupedData)\n                .sort(([a], [b]) => b.localeCompare(a))\n                .slice(0, 6) // \u53EA\u663E\u793A\u6700\u8FD16\u4E2A\u6708\n                .map(([month, items]) => \\`\n                    <div class=\"mb-4\">\n                        <h4 class=\"font-semibold text-gray-700 mb-2 flex items-center\">\n                            <i class=\"fas fa-calendar mr-2 text-blue-500\"></i>\n                            \\${month} (\\${items.length}\u7B14)\n                        </h4>\n                        <div class=\"space-y-2\">\n                            \\${items.map(item => renderHistoricalFlowItem(item)).join('')}\n                        </div>\n                    </div>\n                \\`).join('');\n        }\n        \n        // \u6E32\u67D3\u5386\u53F2\u73B0\u91D1\u6D41\u9879\u76EE\n        function renderHistoricalFlowItem(item) {\n            const isIncome = item.type === 'income';\n            const colorClass = isIncome ? 'text-green-600' : 'text-red-600';\n            const iconClass = isIncome ? 'fa-plus-circle' : 'fa-minus-circle';\n            \n            return \\`\n                <div class=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg\">\n                    <div class=\"flex items-center\">\n                        <i class=\"fas \\${iconClass} \\${colorClass} mr-3\"></i>\n                        <div>\n                            <h5 class=\"font-medium text-gray-800\">\\${item.description}</h5>\n                            <p class=\"text-sm text-gray-500\">\n                                \\${item.actual_date}\n                                \\${item.category ? \\` \u00B7 \\${item.category}\\` : ''}\n                            </p>\n                        </div>\n                    </div>\n                    <span class=\"font-bold \\${colorClass}\">\n                        \\${isIncome ? '+' : '-'}\uFFE5\\${Math.abs(item.amount).toLocaleString()}\n                    </span>\n                </div>\n            \\`;\n        }\n        \n        // \u52A0\u8F7D\u8D1F\u503A\u5217\u8868\n        async function loadLiabilities() {\n            try {\n                const liabilities = await apiClient.getLiabilities();\n                \n                if (liabilities.length === 0) {\n                    document.getElementById('liabilitiesContainer').innerHTML = \\`\n                        <div class=\"text-center py-8 text-gray-500\">\n                            <i class=\"fas fa-credit-card text-4xl mb-4\"></i>\n                            <p>\u6682\u65E0\u8D1F\u503A\u8BB0\u5F55</p>\n                            <p class=\"text-sm\">\u70B9\u51FB\u4E0A\u65B9\u6309\u94AE\u6DFB\u52A0\u60A8\u7684\u7B2C\u4E00\u7B14\u8D1F\u503A</p>\n                        </div>\n                    \\`;\n                    return;\n                }\n                \n                // \u6309\u7C7B\u578B\u5206\u7EC4\n                const groupedLiabilities = liabilities.reduce((acc, liability) => {\n                    const type = liability.liability_type || '\u5176\u4ED6';\n                    if (!acc[type]) acc[type] = [];\n                    acc[type].push(liability);\n                    return acc;\n                }, {});\n                \n                document.getElementById('liabilitiesContainer').innerHTML = Object.entries(groupedLiabilities).map(([type, items]) => \\`\n                    <div class=\"mb-6\">\n                        <h3 class=\"text-lg font-semibold text-gray-800 mb-3 flex items-center\">\n                            <i class=\"fas fa-credit-card mr-2 text-red-500\"></i>\n                            \\${type} (\\${items.length}\u9879)\n                        </h3>\n                        <div class=\"space-y-3\">\n                            \\${items.map(liability => \\`\n                                <div class=\"bg-white rounded-lg p-4 shadow-sm border border-gray-200\">\n                                    <div class=\"flex justify-between items-start\">\n                                        <div class=\"flex-1\">\n                                            <h4 class=\"font-semibold text-gray-800 mb-2\">\\${liability.description}</h4>\n                                            <div class=\"grid grid-cols-2 gap-4 text-sm\">\n                                                <div>\n                                                    <span class=\"text-gray-500\">\u603B\u91D1\u989D\uFF1A</span>\n                                                    <span class=\"font-medium text-red-600\">\uFFE5\\${liability.total_amount.toLocaleString()}</span>\n                                                </div>\n                                                <div>\n                                                    <span class=\"text-gray-500\">\u5269\u4F59\u91D1\u989D\uFF1A</span>\n                                                    <span class=\"font-medium text-red-600\">\uFFE5\\${liability.remaining_amount.toLocaleString()}</span>\n                                                </div>\n                                                <div>\n                                                    <span class=\"text-gray-500\">\u6708\u4F9B\uFF1A</span>\n                                                    <span class=\"font-medium\">\uFFE5\\${liability.monthly_payment.toLocaleString()}</span>\n                                                </div>\n                                                <div>\n                                                    <span class=\"text-gray-500\">\u5229\u7387\uFF1A</span>\n                                                    <span class=\"font-medium\">\\${liability.interest_rate}%</span>\n                                                </div>\n                                                \\${liability.start_date ? \\`\n                                                <div>\n                                                    <span class=\"text-gray-500\">\u5F00\u59CB\u65E5\u671F\uFF1A</span>\n                                                    <span class=\"font-medium\">\\${liability.start_date}</span>\n                                                </div>\n                                                \\` : ''}\n                                                \\${liability.end_date ? \\`\n                                                <div>\n                                                    <span class=\"text-gray-500\">\u7ED3\u675F\u65E5\u671F\uFF1A</span>\n                                                    <span class=\"font-medium text-orange-600\">\\${liability.end_date}</span>\n                                                </div>\n                                                \\` : ''}\n                                            </div>\n                                        </div>\n                                        <div class=\"flex flex-col space-y-2 ml-4\">\n                                            <button onclick=\"editLiability(\\${liability.id})\" class=\"text-blue-500 hover:text-blue-600 p-2\">\n                                                <i class=\"fas fa-edit\"></i>\n                                            </button>\n                                            <button onclick=\"deleteLiability(\\${liability.id})\" class=\"text-red-500 hover:text-red-600 p-2\">\n                                                <i class=\"fas fa-trash\"></i>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            \\`).join('')}\n                        </div>\n                    </div>\n                \\`).join('');\n                \n            } catch (error) {\n                console.error('Failed to load liabilities:', error);\n                showToast('\u52A0\u8F7D\u8D1F\u503A\u5217\u8868\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u5220\u9664\u8D1F\u503A\n        async function deleteLiability(id) {\n            if (!confirm('\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u8D1F\u503A\u5417\uFF1F')) return;\n            \n            try {\n                await apiClient.deleteLiability(id);\n                showToast('\u5220\u9664\u6210\u529F');\n                loadLiabilities();\n                loadDashboard(); // \u5237\u65B0\u4EEA\u8868\u677F\u6570\u636E\n            } catch (error) {\n                showToast('\u5220\u9664\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u5DE5\u5177\u51FD\u6570\n        function getCategoryName(category) {\n            const names = {\n                'fixed': '\u56FA\u5B9A\u8D44\u4EA7',\n                'liquid': '\u6D41\u52A8\u8D44\u4EA7', \n                'consumer': '\u6D88\u8D39\u54C1'\n            };\n            return names[category] || category;\n        }\n        \n        function getCategoryIcon(category) {\n            const icons = {\n                'fixed': 'fa-building',\n                'liquid': 'fa-tint',\n                'consumer': 'fa-shopping-cart'\n            };\n            return icons[category] || 'fa-tag';\n        }\n        \n        // \u6E32\u67D3\u8D44\u4EA7\u5206\u5E03\u9965\u56FE\n        function renderAssetsChart(assetsData) {\n            const ctx = document.getElementById('assetsChart');\n            if (!ctx || assetsData.length === 0) {\n                if (ctx) {\n                    ctx.getContext('2d').clearRect(0, 0, ctx.width, ctx.height);\n                    const context = ctx.getContext('2d');\n                    context.font = '16px Arial';\n                    context.fillStyle = '#9CA3AF';\n                    context.textAlign = 'center';\n                    context.fillText('\u6682\u65E0\u8D44\u4EA7\u6570\u636E', ctx.width/2, ctx.height/2);\n                }\n                return;\n            }\n            \n            new Chart(ctx, {\n                type: 'pie',\n                data: {\n                    labels: assetsData.map(item => getCategoryName(item.category)),\n                    datasets: [{\n                        data: assetsData.map(item => item.total_value),\n                        backgroundColor: [\n                            '#3B82F6', // \u84DD\u8272\n                            '#10B981', // \u7EFF\u8272\n                            '#F59E0B', // \u9EC4\u8272\n                            '#EF4444', // \u7EA2\u8272\n                            '#8B5CF6', // \u7D2B\u8272\n                            '#06B6D4', // \u9752\u8272\n                        ],\n                        borderWidth: 2,\n                        borderColor: '#ffffff'\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                        legend: {\n                            position: 'bottom',\n                            labels: {\n                                padding: 20,\n                                usePointStyle: true\n                            }\n                        },\n                        tooltip: {\n                            callbacks: {\n                                label: function(context) {\n                                    const value = context.parsed;\n                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);\n                                    const percentage = ((value / total) * 100).toFixed(1);\n                                    return \\`\\${context.label}: \uFFE5\\${value.toLocaleString()} (\\${percentage}%)\\`;\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n        }\n        \n        // \u6E32\u67D3\u8D1F\u503A\u5206\u5E03\u9965\u56FE\n        function renderLiabilitiesChart(liabilitiesData) {\n            const ctx = document.getElementById('liabilitiesChart');\n            if (!ctx || liabilitiesData.length === 0) {\n                if (ctx) {\n                    ctx.getContext('2d').clearRect(0, 0, ctx.width, ctx.height);\n                    const context = ctx.getContext('2d');\n                    context.font = '16px Arial';\n                    context.fillStyle = '#9CA3AF';\n                    context.textAlign = 'center';\n                    context.fillText('\u6682\u65E0\u8D1F\u503A\u6570\u636E', ctx.width/2, ctx.height/2);\n                }\n                return;\n            }\n            \n            new Chart(ctx, {\n                type: 'pie',\n                data: {\n                    labels: liabilitiesData.map(item => item.liability_type),\n                    datasets: [{\n                        data: liabilitiesData.map(item => item.total_amount),\n                        backgroundColor: [\n                            '#EF4444', // \u7EA2\u8272\n                            '#F59E0B', // \u9EC4\u8272\n                            '#8B5CF6', // \u7D2B\u8272\n                            '#06B6D4', // \u9752\u8272\n                            '#10B981', // \u7EFF\u8272\n                            '#3B82F6', // \u84DD\u8272\n                        ],\n                        borderWidth: 2,\n                        borderColor: '#ffffff'\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                        legend: {\n                            position: 'bottom',\n                            labels: {\n                                padding: 20,\n                                usePointStyle: true\n                            }\n                        },\n                        tooltip: {\n                            callbacks: {\n                                label: function(context) {\n                                    const value = context.parsed;\n                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);\n                                    const percentage = ((value / total) * 100).toFixed(1);\n                                    return \\`\\${context.label}: \uFFE5\\${value.toLocaleString()} (\\${percentage}%)\\`;\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n        }\n        \n        // \u5220\u9664\u8D44\u4EA7\u7C7B\u578B\n        async function deleteAssetType(id) {\n            if (!confirm('\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u8D44\u4EA7\u7C7B\u578B\u5417\uFF1F')) return;\n            \n            try {\n                await apiClient.deleteAssetType(id);\n                showToast('\u5220\u9664\u6210\u529F');\n                loadAssetTypes();\n            } catch (error) {\n                showToast('\u5220\u9664\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u5220\u9664\u8D44\u4EA7\n        async function deleteAsset(id) {\n            if (!confirm('\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u8D44\u4EA7\u5417\uFF1F')) return;\n            \n            try {\n                await apiClient.deleteAsset(id);\n                showToast('\u5220\u9664\u6210\u529F');\n                loadAssets();\n                loadDashboard(); // \u5237\u65B0\u4EEA\u8868\u677F\u6570\u636E\n            } catch (error) {\n                showToast('\u5220\u9664\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u7F16\u8F91\u8D44\u91D1\u6D41\u5165\u8BB0\u5F55\n        async function editCashFlow(id) {\n            try {\n                const cashFlows = await apiClient.getCashFlows();\n                const flow = cashFlows.find(f => f.id === id);\n                if (!flow) {\n                    showToast('\u8BB0\u5F55\u4E0D\u5B58\u5728', 'error');\n                    return;\n                }\n                \n                showModal(\\`\n                    <div class=\"p-6\">\n                        <div class=\"flex justify-between items-center mb-4\">\n                            <h3 class=\"text-lg font-semibold\">\u7F16\u8F91\u8D44\u91D1\u6D41\u5165\u8BB0\u5F55</h3>\n                            <button onclick=\"hideModal()\" class=\"text-gray-500 hover:text-gray-700\">\n                                <i class=\"fas fa-times\"></i>\n                            </button>\n                        </div>\n                        <form id=\"editCashFlowForm\" class=\"space-y-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u7C7B\u578B</label>\n                                <select name=\"type\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\">\n                                    <option value=\"income\" \\${flow.type === 'income' ? 'selected' : ''}>\u6536\u5165</option>\n                                    <option value=\"expense\" \\${flow.type === 'expense' ? 'selected' : ''}>\u652F\u51FA</option>\n                                </select>\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u63CF\u8FF0</label>\n                                <input type=\"text\" name=\"description\" required value=\"\\${flow.description}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u91D1\u989D (\uFFE5)</label>\n                                <input type=\"number\" name=\"amount\" required min=\"0\" step=\"0.01\" value=\"\\${flow.amount}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u65E5\u671F</label>\n                                <input type=\"date\" name=\"date\" required value=\"\\${flow.date}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5206\u7C7B</label>\n                                <input type=\"text\" name=\"category\" value=\"\\${flow.category || ''}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"flex items-center\">\n                                    <input type=\"checkbox\" name=\"is_recurring\" \\${flow.is_recurring ? 'checked' : ''} class=\"mr-2\">\n                                    <span class=\"text-sm text-gray-700\">\u5B9A\u671F\u91CD\u590D</span>\n                                </label>\n                            </div>\n                            <div id=\"editRecurringOptions\" class=\"\\${flow.is_recurring ? '' : 'hidden'}\">\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u91CD\u590D\u9891\u7387</label>\n                                <select name=\"recurring_type\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\">\n                                    <option value=\"daily\" \\${flow.recurring_type === 'daily' ? 'selected' : ''}>\u6BCF\u5929</option>\n                                    <option value=\"weekly\" \\${flow.recurring_type === 'weekly' ? 'selected' : ''}>\u6BCF\u5468</option>\n                                    <option value=\"monthly\" \\${flow.recurring_type === 'monthly' ? 'selected' : ''}>\u6BCF\u6708</option>\n                                    <option value=\"quarterly\" \\${flow.recurring_type === 'quarterly' ? 'selected' : ''}>\u6BCF\u5B63\u5EA6</option>\n                                    <option value=\"yearly\" \\${flow.recurring_type === 'yearly' ? 'selected' : ''}>\u6BCF\u5E74</option>\n                                </select>\n                            </div>\n                            <div class=\"flex space-x-3 pt-4\">\n                                <button type=\"button\" onclick=\"hideModal()\" class=\"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\">\u53D6\u6D88</button>\n                                <button type=\"submit\" class=\"flex-1 py-3 px-4 bg-purple-500 text-white rounded-lg hover:bg-purple-600\">\u4FDD\u5B58</button>\n                            </div>\n                        </form>\n                    </div>\n                \\`);\n                \n                // \u5B9A\u671F\u9009\u9879\u5207\u6362\n                document.querySelector('#editCashFlowForm input[name=\"is_recurring\"]').addEventListener('change', (e) => {\n                    document.getElementById('editRecurringOptions').classList.toggle('hidden', !e.target.checked);\n                });\n                \n                // \u8868\u5355\u63D0\u4EA4\n                document.getElementById('editCashFlowForm').addEventListener('submit', async (e) => {\n                    e.preventDefault();\n                    const formData = new FormData(e.target);\n                    const data = {\n                        type: formData.get('type'),\n                        description: formData.get('description'),\n                        amount: parseFloat(formData.get('amount')),\n                        date: formData.get('date'),\n                        category: formData.get('category') || null,\n                        is_recurring: formData.get('is_recurring') ? 1 : 0,\n                        recurring_type: formData.get('is_recurring') ? formData.get('recurring_type') : null\n                    };\n                    \n                    try {\n                        await apiClient.updateCashFlow(id, data);\n                        hideModal();\n                        showToast('\u4FEE\u6539\u6210\u529F');\n                        loadCashFlow();\n                    } catch (error) {\n                        showToast('\u4FEE\u6539\u5931\u8D25', 'error');\n                    }\n                });\n            } catch (error) {\n                showToast('\u52A0\u8F7D\u8BB0\u5F55\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u5220\u9664\u8D44\u91D1\u6D41\u5165\u8BB0\u5F55\n        async function deleteCashFlow(id) {\n            if (!confirm('\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u8BB0\u5F55\u5417\uFF1F')) return;\n            \n            try {\n                await apiClient.deleteCashFlow(id);\n                showToast('\u5220\u9664\u6210\u529F');\n                loadCashFlow();\n            } catch (error) {\n                showToast('\u5220\u9664\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u663E\u793A\u6DFB\u52A0\u8D1F\u503A\u6A21\u6001\u6846\n        function showAddLiabilityModal() {\n            showModal(\\`\n                <div class=\"p-6\">\n                    <div class=\"flex justify-between items-center mb-4\">\n                        <h3 class=\"text-lg font-semibold\">\u6DFB\u52A0\u8D1F\u503A</h3>\n                        <button onclick=\"hideModal()\" class=\"text-gray-500 hover:text-gray-700\">\n                            <i class=\"fas fa-times\"></i>\n                        </button>\n                    </div>\n                    <form id=\"addLiabilityForm\" class=\"space-y-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u8D1F\u503A\u7C7B\u578B</label>\n                            <select name=\"liability_type\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                                <option value=\"\">\u8BF7\u9009\u62E9\u8D1F\u503A\u7C7B\u578B</option>\n                                <option value=\"\u623F\u8D37\">\u623F\u8D37</option>\n                                <option value=\"\u8F66\u8D37\">\u8F66\u8D37</option>\n                                <option value=\"\u4FE1\u7528\u5361\">\u4FE1\u7528\u5361</option>\n                                <option value=\"\u4E2A\u4EBA\u501F\u6B3E\">\u4E2A\u4EBA\u501F\u6B3E</option>\n                                <option value=\"\u5176\u4ED6\">\u5176\u4ED6</option>\n                            </select>\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u63CF\u8FF0</label>\n                            <input type=\"text\" name=\"description\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u603B\u91D1\u989D</label>\n                            <input type=\"number\" name=\"total_amount\" required min=\"0\" step=\"0.01\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5269\u4F59\u91D1\u989D</label>\n                            <input type=\"number\" name=\"remaining_amount\" required min=\"0\" step=\"0.01\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u6708\u4F9B</label>\n                            <input type=\"number\" name=\"monthly_payment\" required min=\"0\" step=\"0.01\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5229\u7387 (%)</label>\n                            <input type=\"number\" name=\"interest_rate\" required min=\"0\" step=\"0.01\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5F00\u59CB\u65E5\u671F</label>\n                            <input type=\"date\" name=\"start_date\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u7ED3\u675F\u65E5\u671F</label>\n                            <input type=\"date\" name=\"end_date\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                        </div>\n                        <div class=\"flex space-x-3 pt-4\">\n                            <button type=\"button\" onclick=\"hideModal()\" class=\"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\">\u53D6\u6D88</button>\n                            <button type=\"submit\" class=\"flex-1 py-3 px-4 bg-red-500 text-white rounded-lg hover:bg-red-600\">\u6DFB\u52A0</button>\n                        </div>\n                    </form>\n                </div>\n            \\`);\n            \n            document.getElementById('addLiabilityForm').addEventListener('submit', async (e) => {\n                e.preventDefault();\n                const formData = new FormData(e.target);\n                const data = {\n                    liability_type: formData.get('liability_type'),\n                    description: formData.get('description'),\n                    total_amount: parseFloat(formData.get('total_amount')),\n                    remaining_amount: parseFloat(formData.get('remaining_amount')),\n                    monthly_payment: parseFloat(formData.get('monthly_payment')),\n                    interest_rate: parseFloat(formData.get('interest_rate')),\n                    start_date: formData.get('start_date') || null,\n                    end_date: formData.get('end_date') || null\n                };\n                \n                try {\n                    await apiClient.createLiability(data);\n                    hideModal();\n                    showToast('\u6DFB\u52A0\u6210\u529F');\n                    loadLiabilities();\n                    loadDashboard(); // \u5237\u65B0\u4EEA\u8868\u677F\u6570\u636E\n                } catch (error) {\n                    showToast('\u6DFB\u52A0\u5931\u8D25', 'error');\n                }\n            });\n        }\n        \n        // \u5220\u9664\u8D44\u4EA7\n        async function deleteAsset(id) {\n            if (!confirm('\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u8D44\u4EA7\u5417\uFF1F')) return;\n            \n            try {\n                await apiClient.deleteAsset(id);\n                showToast('\u5220\u9664\u6210\u529F');\n                loadAssets();\n                loadDashboard(); // \u5237\u65B0\u4EEA\u8868\u677F\u6570\u636E\n            } catch (error) {\n                showToast('\u5220\u9664\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u5220\u9664\u8D1F\u503A\n        async function deleteLiability(id) {\n            if (!confirm('\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u8D1F\u503A\u5417\uFF1F')) return;\n            \n            try {\n                await apiClient.deleteLiability(id);\n                showToast('\u5220\u9664\u6210\u529F');\n                loadLiabilities();\n                loadDashboard(); // \u5237\u65B0\u4EEA\u8868\u677F\u6570\u636E\n            } catch (error) {\n                showToast('\u5220\u9664\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u7F16\u8F91\u8D44\u4EA7\n        async function editAsset(id) {\n            try {\n                const assets = await apiClient.getAssets();\n                const asset = assets.find(a => a.id === id);\n                if (!asset) {\n                    showToast('\u8D44\u4EA7\u4E0D\u5B58\u5728', 'error');\n                    return;\n                }\n                \n                const assetTypes = await apiClient.getAssetTypes();\n                \n                showModal(\\`\n                    <div class=\"p-6\">\n                        <div class=\"flex justify-between items-center mb-4\">\n                            <h3 class=\"text-lg font-semibold\">\u7F16\u8F91\u8D44\u4EA7</h3>\n                            <button onclick=\"hideModal()\" class=\"text-gray-500 hover:text-gray-700\">\n                                <i class=\"fas fa-times\"></i>\n                            </button>\n                        </div>\n                        <form id=\"editAssetForm\" class=\"space-y-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u8D44\u4EA7\u540D\u79F0</label>\n                                <input type=\"text\" name=\"name\" required value=\"\\${asset.name}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u8D44\u4EA7\u7C7B\u578B</label>\n                                <select name=\"asset_type_id\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                                    <option value=\"\">\u8BF7\u9009\u62E9\u8D44\u4EA7\u7C7B\u578B</option>\n                                    \\${assetTypes.map(type => \\`\n                                        <option value=\"\\${type.id}\" \\${type.id === asset.asset_type_id ? 'selected' : ''}>\n                                            \\${type.name} (\\${getCategoryName(type.category)})\n                                        </option>\n                                    \\`).join('')}\n                                </select>\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5F53\u524D\u4EF7\u503C</label>\n                                <input type=\"number\" name=\"current_value\" required min=\"0\" step=\"0.01\" value=\"\\${asset.current_value}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u8D2D\u4E70\u4EF7\u503C</label>\n                                <input type=\"number\" name=\"purchase_value\" required min=\"0\" step=\"0.01\" value=\"\\${asset.purchase_value}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u8D2D\u4E70\u65E5\u671F</label>\n                                <input type=\"date\" name=\"purchase_date\" required value=\"\\${asset.purchase_date}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u9884\u671F\u6536\u76CA\u7387 (%)</label>\n                                <input type=\"number\" name=\"expected_return_rate\" min=\"0\" step=\"0.01\" value=\"\\${asset.expected_return_rate || 0}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u63CF\u8FF0</label>\n                                <textarea name=\"description\" rows=\"3\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\\${asset.description || ''}</textarea>\n                            </div>\n                            <div class=\"flex space-x-3 pt-4\">\n                                <button type=\"button\" onclick=\"hideModal()\" class=\"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\">\u53D6\u6D88</button>\n                                <button type=\"submit\" class=\"flex-1 py-3 px-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600\">\u4FDD\u5B58</button>\n                            </div>\n                        </form>\n                    </div>\n                \\`);\n                \n                document.getElementById('editAssetForm').addEventListener('submit', async (e) => {\n                    e.preventDefault();\n                    const formData = new FormData(e.target);\n                    const data = {\n                        name: formData.get('name'),\n                        asset_type_id: parseInt(formData.get('asset_type_id')),\n                        current_value: parseFloat(formData.get('current_value')),\n                        purchase_value: parseFloat(formData.get('purchase_value')),\n                        purchase_date: formData.get('purchase_date'),\n                        expected_return_rate: parseFloat(formData.get('expected_return_rate')) || 0,\n                        description: formData.get('description') || null\n                    };\n                    \n                    try {\n                        await apiClient.updateAsset(id, data);\n                        hideModal();\n                        showToast('\u4FEE\u6539\u6210\u529F');\n                        loadAssets();\n                        loadDashboard(); // \u5237\u65B0\u4EEA\u8868\u677F\u6570\u636E\n                    } catch (error) {\n                        showToast('\u4FEE\u6539\u5931\u8D25', 'error');\n                    }\n                });\n                \n            } catch (error) {\n                showToast('\u52A0\u8F7D\u8D44\u4EA7\u4FE1\u606F\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u7F16\u8F91\u8D1F\u503A\n        async function editLiability(id) {\n            try {\n                const liabilities = await apiClient.getLiabilities();\n                const liability = liabilities.find(l => l.id === id);\n                if (!liability) {\n                    showToast('\u8D1F\u503A\u4E0D\u5B58\u5728', 'error');\n                    return;\n                }\n                \n                showModal(\\`\n                    <div class=\"p-6\">\n                        <div class=\"flex justify-between items-center mb-4\">\n                            <h3 class=\"text-lg font-semibold\">\u7F16\u8F91\u8D1F\u503A</h3>\n                            <button onclick=\"hideModal()\" class=\"text-gray-500 hover:text-gray-700\">\n                                <i class=\"fas fa-times\"></i>\n                            </button>\n                        </div>\n                        <form id=\"editLiabilityForm\" class=\"space-y-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u8D1F\u503A\u7C7B\u578B</label>\n                                <select name=\"liability_type\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                                    <option value=\"\">\u8BF7\u9009\u62E9\u8D1F\u503A\u7C7B\u578B</option>\n                                    <option value=\"\u623F\u8D37\" \\${liability.liability_type === '\u623F\u8D37' ? 'selected' : ''}>\u623F\u8D37</option>\n                                    <option value=\"\u8F66\u8D37\" \\${liability.liability_type === '\u8F66\u8D37' ? 'selected' : ''}>\u8F66\u8D37</option>\n                                    <option value=\"\u4FE1\u7528\u5361\" \\${liability.liability_type === '\u4FE1\u7528\u5361' ? 'selected' : ''}>\u4FE1\u7528\u5361</option>\n                                    <option value=\"\u4E2A\u4EBA\u501F\u6B3E\" \\${liability.liability_type === '\u4E2A\u4EBA\u501F\u6B3E' ? 'selected' : ''}>\u4E2A\u4EBA\u501F\u6B3E</option>\n                                    <option value=\"\u5176\u4ED6\" \\${liability.liability_type === '\u5176\u4ED6' ? 'selected' : ''}>\u5176\u4ED6</option>\n                                </select>\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u63CF\u8FF0</label>\n                                <input type=\"text\" name=\"description\" required value=\"\\${liability.description}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u603B\u91D1\u989D</label>\n                                <input type=\"number\" name=\"total_amount\" required min=\"0\" step=\"0.01\" value=\"\\${liability.total_amount}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5269\u4F59\u91D1\u989D</label>\n                                <input type=\"number\" name=\"remaining_amount\" required min=\"0\" step=\"0.01\" value=\"\\${liability.remaining_amount}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u6708\u4F9B</label>\n                                <input type=\"number\" name=\"monthly_payment\" required min=\"0\" step=\"0.01\" value=\"\\${liability.monthly_payment}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5229\u7387 (%)</label>\n                                <input type=\"number\" name=\"interest_rate\" required min=\"0\" step=\"0.01\" value=\"\\${liability.interest_rate}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5F00\u59CB\u65E5\u671F</label>\n                                <input type=\"date\" name=\"start_date\" value=\"\\${liability.start_date || ''}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u7ED3\u675F\u65E5\u671F</label>\n                                <input type=\"date\" name=\"end_date\" value=\"\\${liability.end_date || ''}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\">\n                            </div>\n                            <div class=\"flex space-x-3 pt-4\">\n                                <button type=\"button\" onclick=\"hideModal()\" class=\"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\">\u53D6\u6D88</button>\n                                <button type=\"submit\" class=\"flex-1 py-3 px-4 bg-red-500 text-white rounded-lg hover:bg-red-600\">\u4FDD\u5B58</button>\n                            </div>\n                        </form>\n                    </div>\n                \\`);\n                \n                document.getElementById('editLiabilityForm').addEventListener('submit', async (e) => {\n                    e.preventDefault();\n                    const formData = new FormData(e.target);\n                    const data = {\n                        liability_type: formData.get('liability_type'),\n                        description: formData.get('description'),\n                        total_amount: parseFloat(formData.get('total_amount')),\n                        remaining_amount: parseFloat(formData.get('remaining_amount')),\n                        monthly_payment: parseFloat(formData.get('monthly_payment')),\n                        interest_rate: parseFloat(formData.get('interest_rate')),\n                        start_date: formData.get('start_date') || null,\n                        end_date: formData.get('end_date') || null\n                    };\n                    \n                    try {\n                        await apiClient.updateLiability(id, data);\n                        hideModal();\n                        showToast('\u4FEE\u6539\u6210\u529F');\n                        loadLiabilities();\n                        loadDashboard(); // \u5237\u65B0\u4EEA\u8868\u677F\u6570\u636E\n                    } catch (error) {\n                        showToast('\u4FEE\u6539\u5931\u8D25', 'error');\n                    }\n                });\n                \n            } catch (error) {\n                showToast('\u52A0\u8F7D\u8D1F\u503A\u4FE1\u606F\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u7F16\u8F91\u8D44\u4EA7\u7C7B\u578B\n        async function editAssetType(id) {\n            try {\n                const assetTypes = await apiClient.getAssetTypes();\n                const assetType = assetTypes.find(t => t.id === id);\n                if (!assetType) {\n                    showToast('\u8D44\u4EA7\u7C7B\u578B\u4E0D\u5B58\u5728', 'error');\n                    return;\n                }\n                \n                showModal(\\`\n                    <div class=\"p-6\">\n                        <div class=\"flex justify-between items-center mb-4\">\n                            <h3 class=\"text-lg font-semibold\">\u7F16\u8F91\u8D44\u4EA7\u7C7B\u578B</h3>\n                            <button onclick=\"hideModal()\" class=\"text-gray-500 hover:text-gray-700\">\n                                <i class=\"fas fa-times\"></i>\n                            </button>\n                        </div>\n                        <form id=\"editAssetTypeForm\" class=\"space-y-4\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u7C7B\u578B\u540D\u79F0</label>\n                                <input type=\"text\" name=\"name\" required value=\"\\${assetType.name}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5206\u7C7B</label>\n                                <select name=\"category\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\">\n                                    <option value=\"\">\u8BF7\u9009\u62E9\u5206\u7C7B</option>\n                                    <option value=\"fixed\" \\${assetType.category === 'fixed' ? 'selected' : ''}>\u56FA\u5B9A\u8D44\u4EA7</option>\n                                    <option value=\"liquid\" \\${assetType.category === 'liquid' ? 'selected' : ''}>\u6D41\u52A8\u8D44\u4EA7</option>\n                                    <option value=\"consumer\" \\${assetType.category === 'consumer' ? 'selected' : ''}>\u6D88\u8D39\u54C1</option>\n                                </select>\n                            </div>\n                            <div>\n                                <label class=\"flex items-center\">\n                                    <input type=\"checkbox\" name=\"has_depreciation\" \\${assetType.has_depreciation ? 'checked' : ''} class=\"mr-2\">\n                                    <span class=\"text-sm text-gray-700\">\u6709\u6298\u65E7</span>\n                                </label>\n                            </div>\n                            <div id=\"editDepreciationRate\" class=\"\\${assetType.has_depreciation ? '' : 'hidden'}\">\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u6298\u65E7\u7387 (%)</label>\n                                <input type=\"number\" name=\"depreciation_rate\" min=\"0\" step=\"0.01\" value=\"\\${assetType.depreciation_rate || 0}\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\">\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u63CF\u8FF0</label>\n                                <textarea name=\"description\" rows=\"3\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\">\\${assetType.description || ''}</textarea>\n                            </div>\n                            <div class=\"flex space-x-3 pt-4\">\n                                <button type=\"button\" onclick=\"hideModal()\" class=\"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\">\u53D6\u6D88</button>\n                                <button type=\"submit\" class=\"flex-1 py-3 px-4 bg-green-500 text-white rounded-lg hover:bg-green-600\">\u4FDD\u5B58</button>\n                            </div>\n                        </form>\n                    </div>\n                \\`);\n                \n                // \u6298\u65E7\u9009\u9879\u5207\u6362\n                document.querySelector('#editAssetTypeForm input[name=\"has_depreciation\"]').addEventListener('change', (e) => {\n                    document.getElementById('editDepreciationRate').classList.toggle('hidden', !e.target.checked);\n                });\n                \n                document.getElementById('editAssetTypeForm').addEventListener('submit', async (e) => {\n                    e.preventDefault();\n                    const formData = new FormData(e.target);\n                    const data = {\n                        name: formData.get('name'),\n                        category: formData.get('category'),\n                        has_depreciation: formData.get('has_depreciation') ? 1 : 0,\n                        depreciation_rate: formData.get('has_depreciation') ? parseFloat(formData.get('depreciation_rate')) || 0 : 0,\n                        description: formData.get('description') || null\n                    };\n                    \n                    try {\n                        await apiClient.updateAssetType(id, data);\n                        hideModal();\n                        showToast('\u4FEE\u6539\u6210\u529F');\n                        loadDashboardAssetTypes();\n                        loadDashboard(); // \u5237\u65B0\u4EEA\u8868\u677F\u6570\u636E\n                    } catch (error) {\n                        showToast('\u4FEE\u6539\u5931\u8D25', 'error');\n                    }\n                });\n                \n            } catch (error) {\n                showToast('\u52A0\u8F7D\u8D44\u4EA7\u7C7B\u578B\u4FE1\u606F\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u663E\u793A\u8D44\u4EA7\u7C7B\u578B\u7BA1\u7406\u9875\u9762\n        async function showAssetTypesManagement() {\n            try {\n                const assetTypes = await apiClient.getAssetTypes();\n                \n                const groupedTypes = assetTypes.reduce((acc, type) => {\n                    if (!acc[type.category]) acc[type.category] = [];\n                    acc[type.category].push(type);\n                    return acc;\n                }, {});\n                \n                showModal(\\`\n                    <div class=\"p-6 max-w-4xl\">\n                        <div class=\"flex justify-between items-center mb-4\">\n                            <h3 class=\"text-lg font-semibold\">\u8D44\u4EA7\u7C7B\u578B\u7BA1\u7406</h3>\n                            <div class=\"flex space-x-2\">\n                                <button onclick=\"showAddAssetTypeModal()\" class=\"bg-green-500 text-white px-4 py-2 rounded-lg text-sm flex items-center\">\n                                    <i class=\"fas fa-plus mr-2\"></i>\u6DFB\u52A0\u7C7B\u578B\n                                </button>\n                                <button onclick=\"hideModal()\" class=\"text-gray-500 hover:text-gray-700\">\n                                    <i class=\"fas fa-times\"></i>\n                                </button>\n                            </div>\n                        </div>\n                        <div class=\"space-y-6 max-h-96 overflow-y-auto\">\n                            \\${Object.entries(groupedTypes).map(([category, types]) => \\`\n                                <div>\n                                    <h4 class=\"text-md font-semibold text-gray-700 mb-3 flex items-center\">\n                                        <i class=\"fas \\${getCategoryIcon(category)} mr-2 text-blue-500\"></i>\n                                        \\${getCategoryName(category)} (\\${types.length}\u9879)\n                                    </h4>\n                                    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                                        \\${types.map(type => \\`\n                                            <div class=\"bg-gray-50 rounded-lg p-3 border\">\n                                                <div class=\"flex justify-between items-start\">\n                                                    <div class=\"flex-1\">\n                                                        <h5 class=\"font-medium text-gray-800\">\\${type.name}</h5>\n                                                        \\${type.description ? \\`<p class=\"text-gray-500 text-sm mt-1\">\\${type.description}</p>\\` : ''}\n                                                        \\${type.has_depreciation ? \\`<p class=\"text-orange-500 text-xs mt-1\">\u6298\u65E7\u7387: \\${type.depreciation_rate}%</p>\\` : ''}\n                                                    </div>\n                                                    <div class=\"flex space-x-1 ml-2\">\n                                                        <button onclick=\"editAssetType(\\${type.id})\" class=\"text-blue-500 hover:text-blue-600 p-1\">\n                                                            <i class=\"fas fa-edit text-sm\"></i>\n                                                        </button>\n                                                        <button onclick=\"deleteAssetType(\\${type.id})\" class=\"text-red-500 hover:text-red-600 p-1\">\n                                                            <i class=\"fas fa-trash text-sm\"></i>\n                                                        </button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        \\`).join('')}\n                                    </div>\n                                </div>\n                            \\`).join('')}\n                        </div>\n                    </div>\n                \\`);\n                \n            } catch (error) {\n                showToast('\u52A0\u8F7D\u8D44\u4EA7\u7C7B\u578B\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u5220\u9664\u8D44\u4EA7\u7C7B\u578B\n        async function deleteAssetType(id) {\n            if (!confirm('\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u8D44\u4EA7\u7C7B\u578B\u5417\uFF1F\u6CE8\u610F\uFF1A\u5220\u9664\u540E\u4F7F\u7528\u8BE5\u7C7B\u578B\u7684\u8D44\u4EA7\u5C06\u663E\u793A\u4E3A\u672A\u5206\u7C7B\u3002')) return;\n            \n            try {\n                await apiClient.deleteAssetType(id);\n                showToast('\u5220\u9664\u6210\u529F');\n                showAssetTypesManagement(); // \u5237\u65B0\u7BA1\u7406\u9875\u9762\n                loadDashboard(); // \u5237\u65B0\u4EEA\u8868\u677F\u6570\u636E\n            } catch (error) {\n                showToast('\u5220\u9664\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u663E\u793A\u6DFB\u52A0\u8D44\u4EA7\u7C7B\u578B\u6A21\u6001\u6846\n        function showAddAssetTypeModal() {\n            showModal(\\`\n                <div class=\"p-6\">\n                    <div class=\"flex justify-between items-center mb-4\">\n                        <h3 class=\"text-lg font-semibold\">\u6DFB\u52A0\u8D44\u4EA7\u7C7B\u578B</h3>\n                        <button onclick=\"hideModal()\" class=\"text-gray-500 hover:text-gray-700\">\n                            <i class=\"fas fa-times\"></i>\n                        </button>\n                    </div>\n                    <form id=\"addAssetTypeForm\" class=\"space-y-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u7C7B\u578B\u540D\u79F0</label>\n                            <input type=\"text\" name=\"name\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5206\u7C7B</label>\n                            <select name=\"category\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\">\n                                <option value=\"\">\u8BF7\u9009\u62E9\u5206\u7C7B</option>\n                                <option value=\"fixed\">\u56FA\u5B9A\u8D44\u4EA7</option>\n                                <option value=\"liquid\">\u6D41\u52A8\u8D44\u4EA7</option>\n                                <option value=\"consumer\">\u6D88\u8D39\u54C1</option>\n                            </select>\n                        </div>\n                        <div>\n                            <label class=\"flex items-center\">\n                                <input type=\"checkbox\" name=\"has_depreciation\" class=\"mr-2\">\n                                <span class=\"text-sm text-gray-700\">\u6709\u6298\u65E7</span>\n                            </label>\n                        </div>\n                        <div id=\"addDepreciationRate\" class=\"hidden\">\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u6298\u65E7\u7387 (%)</label>\n                            <input type=\"number\" name=\"depreciation_rate\" min=\"0\" step=\"0.01\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u63CF\u8FF0</label>\n                            <textarea name=\"description\" rows=\"3\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\"></textarea>\n                        </div>\n                        <div class=\"flex space-x-3 pt-4\">\n                            <button type=\"button\" onclick=\"hideModal()\" class=\"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\">\u53D6\u6D88</button>\n                            <button type=\"submit\" class=\"flex-1 py-3 px-4 bg-green-500 text-white rounded-lg hover:bg-green-600\">\u6DFB\u52A0</button>\n                        </div>\n                    </form>\n                </div>\n            \\`);\n            \n            // \u6298\u65E7\u9009\u9879\u5207\u6362\n            document.querySelector('#addAssetTypeForm input[name=\"has_depreciation\"]').addEventListener('change', (e) => {\n                document.getElementById('addDepreciationRate').classList.toggle('hidden', !e.target.checked);\n            });\n            \n            document.getElementById('addAssetTypeForm').addEventListener('submit', async (e) => {\n                e.preventDefault();\n                const formData = new FormData(e.target);\n                const data = {\n                    name: formData.get('name'),\n                    category: formData.get('category'),\n                    has_depreciation: formData.get('has_depreciation') ? 1 : 0,\n                    depreciation_rate: formData.get('has_depreciation') ? parseFloat(formData.get('depreciation_rate')) || 0 : 0,\n                    description: formData.get('description') || null\n                };\n                \n                try {\n                    await apiClient.createAssetType(data);\n                    hideModal();\n                    showToast('\u6DFB\u52A0\u6210\u529F');\n                    showAssetTypesManagement(); // \u5237\u65B0\u7BA1\u7406\u9875\u9762\n                    loadDashboard(); // \u5237\u65B0\u4EEA\u8868\u677F\u6570\u636E\n                } catch (error) {\n                    showToast('\u6DFB\u52A0\u5931\u8D25', 'error');\n                }\n            });\n        }\n        \n        // \u4E8B\u4EF6\u76D1\u542C\u5668\n        document.addEventListener('DOMContentLoaded', () => {\n            // \u5BFC\u822A\u6309\u94AE\n            document.getElementById('dashboardBtn').addEventListener('click', () => showPage('dashboard'));\n            document.getElementById('assetsBtn').addEventListener('click', () => showPage('assets'));\n            document.getElementById('liabilitiesBtn').addEventListener('click', () => showPage('liabilities'));\n            document.getElementById('cashFlowBtn').addEventListener('click', () => showPage('cashFlow'));\n            \n            // \u6DFB\u52A0\u6309\u94AE\n            document.getElementById('addAssetBtn').addEventListener('click', showAddAssetModal);\n            document.getElementById('addLiabilityBtn').addEventListener('click', showAddLiabilityModal);\n            document.getElementById('addCashFlowBtn').addEventListener('click', showAddCashFlowModal);\n            \n            // \u6A21\u6001\u6846\u5173\u95ED\n            document.getElementById('modal').addEventListener('click', (e) => {\n                if (e.target.id === 'modal') hideModal();\n            });\n            \n            // \u521D\u59CB\u5316\n            loadDashboard();\n        });\n        \n        // \u663E\u793A\u6DFB\u52A0\u8D44\u4EA7\u7C7B\u578B\u6A21\u6001\u6846\n        function showAddTypeModal() {\n            showModal(\\`\n                <div class=\"p-6\">\n                    <div class=\"flex justify-between items-center mb-4\">\n                        <h3 class=\"text-lg font-semibold\">\u6DFB\u52A0\u8D44\u4EA7\u7C7B\u578B</h3>\n                        <button onclick=\"hideModal()\" class=\"text-gray-500 hover:text-gray-700\">\n                            <i class=\"fas fa-times\"></i>\n                        </button>\n                    </div>\n                    <form id=\"addTypeForm\" class=\"space-y-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u7C7B\u578B\u540D\u79F0</label>\n                            <input type=\"text\" name=\"name\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5206\u7C7B</label>\n                            <select name=\"category\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                                <option value=\"\">\u8BF7\u9009\u62E9\u5206\u7C7B</option>\n                                <option value=\"fixed\">\u56FA\u5B9A\u8D44\u4EA7</option>\n                                <option value=\"liquid\">\u6D41\u52A8\u8D44\u4EA7</option>\n                                <option value=\"consumer\">\u6D88\u8D39\u54C1</option>\n                            </select>\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u63CF\u8FF0</label>\n                            <textarea name=\"description\" rows=\"3\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"></textarea>\n                        </div>\n                        <div>\n                            <label class=\"flex items-center\">\n                                <input type=\"checkbox\" name=\"has_depreciation\" class=\"mr-2\">\n                                <span class=\"text-sm text-gray-700\">\u652F\u6301\u6298\u65E7</span>\n                            </label>\n                        </div>\n                        <div id=\"depreciationRate\" class=\"hidden\">\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5E74\u6298\u65E7\u7387 (%)</label>\n                            <input type=\"number\" name=\"depreciation_rate\" min=\"0\" max=\"100\" step=\"0.1\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                        </div>\n                        <div class=\"flex space-x-3 pt-4\">\n                            <button type=\"button\" onclick=\"hideModal()\" class=\"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\">\u53D6\u6D88</button>\n                            <button type=\"submit\" class=\"flex-1 py-3 px-4 bg-green-500 text-white rounded-lg hover:bg-green-600\">\u6DFB\u52A0</button>\n                        </div>\n                    </form>\n                </div>\n            \\`);\n            \n            // \u6298\u65E7\u9009\u9879\u5207\u6362\n            document.querySelector('input[name=\"has_depreciation\"]').addEventListener('change', (e) => {\n                document.getElementById('depreciationRate').classList.toggle('hidden', !e.target.checked);\n            });\n            \n            // \u8868\u5355\u63D0\u4EA4\n            document.getElementById('addTypeForm').addEventListener('submit', async (e) => {\n                e.preventDefault();\n                const formData = new FormData(e.target);\n                const data = {\n                    name: formData.get('name'),\n                    category: formData.get('category'),\n                    description: formData.get('description'),\n                    has_depreciation: formData.get('has_depreciation') ? 1 : 0,\n                    depreciation_rate: formData.get('has_depreciation') ? parseFloat(formData.get('depreciation_rate') || 0) / 100 : 0\n                };\n                \n                try {\n                    await apiClient.createAssetType(data);\n                    hideModal();\n                    showToast('\u6DFB\u52A0\u6210\u529F');\n                    loadAssetTypes();\n                } catch (error) {\n                    showToast('\u6DFB\u52A0\u5931\u8D25', 'error');\n                }\n            });\n        }\n        \n        // \u663E\u793A\u6DFB\u52A0\u8D44\u4EA7\u6A21\u6001\u6846\n        async function showAddAssetModal() {\n            // \u52A0\u8F7D\u8D44\u4EA7\u7C7B\u578B\n            try {\n                const types = await apiClient.getAssetTypes();\n                if (types.length === 0) {\n                    showToast('\u8BF7\u5148\u6DFB\u52A0\u8D44\u4EA7\u7C7B\u578B', 'error');\n                    return;\n                }\n                assetTypes = types;\n            } catch (error) {\n                showToast('\u52A0\u8F7D\u8D44\u4EA7\u7C7B\u578B\u5931\u8D25', 'error');\n                return;\n            }\n            \n            showModal(\\`\n                <div class=\"p-6\">\n                    <div class=\"flex justify-between items-center mb-4\">\n                        <h3 class=\"text-lg font-semibold\">\u6DFB\u52A0\u8D44\u4EA7</h3>\n                        <button onclick=\"hideModal()\" class=\"text-gray-500 hover:text-gray-700\">\n                            <i class=\"fas fa-times\"></i>\n                        </button>\n                    </div>\n                    <form id=\"addAssetForm\" class=\"space-y-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u8D44\u4EA7\u540D\u79F0</label>\n                            <input type=\"text\" name=\"name\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u8D44\u4EA7\u7C7B\u578B</label>\n                            <select name=\"asset_type_id\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                                <option value=\"\">\u8BF7\u9009\u62E9\u8D44\u4EA7\u7C7B\u578B</option>\n                                \\${assetTypes.map(type => \\`<option value=\"\\${type.id}\">\\${type.name} (\\${getCategoryName(type.category)})</option>\\`).join('')}\n                            </select>\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5F53\u524D\u4EF7\u503C (\uFFE5)</label>\n                            <input type=\"number\" name=\"current_value\" required min=\"0\" step=\"0.01\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u8D2D\u4E70\u4EF7\u683C (\uFFE5)</label>\n                            <input type=\"number\" name=\"purchase_value\" min=\"0\" step=\"0.01\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u8D2D\u4E70\u65E5\u671F</label>\n                            <input type=\"date\" name=\"purchase_date\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\">\n                        </div>\n                        <div class=\"flex space-x-3 pt-4\">\n                            <button type=\"button\" onclick=\"hideModal()\" class=\"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\">\u53D6\u6D88</button>\n                            <button type=\"submit\" class=\"flex-1 py-3 px-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600\">\u6DFB\u52A0</button>\n                        </div>\n                    </form>\n                </div>\n            \\`);\n            \n            // \u8868\u5355\u63D0\u4EA4\n            document.getElementById('addAssetForm').addEventListener('submit', async (e) => {\n                e.preventDefault();\n                const formData = new FormData(e.target);\n                const data = {\n                    name: formData.get('name'),\n                    asset_type_id: parseInt(formData.get('asset_type_id')),\n                    current_value: parseFloat(formData.get('current_value')),\n                    purchase_value: formData.get('purchase_value') ? parseFloat(formData.get('purchase_value')) : null,\n                    purchase_date: formData.get('purchase_date') || null\n                };\n                \n                try {\n                    await apiClient.createAsset(data);\n                    hideModal();\n                    showToast('\u6DFB\u52A0\u6210\u529F');\n                    loadAssets();\n                } catch (error) {\n                    showToast('\u6DFB\u52A0\u5931\u8D25', 'error');\n                }\n            });\n        }\n        \n        // \u663E\u793A\u6DFB\u52A0\u8D44\u91D1\u6D41\u5165\u6A21\u6001\u6846\n        function showAddCashFlowModal() {\n            showModal(\\`\n                <div class=\"p-6\">\n                    <div class=\"flex justify-between items-center mb-4\">\n                        <h3 class=\"text-lg font-semibold\">\u6DFB\u52A0\u8D44\u91D1\u6D41\u5165\u8BB0\u5F55</h3>\n                        <button onclick=\"hideModal()\" class=\"text-gray-500 hover:text-gray-700\">\n                            <i class=\"fas fa-times\"></i>\n                        </button>\n                    </div>\n                    <form id=\"addCashFlowForm\" class=\"space-y-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u7C7B\u578B</label>\n                            <select name=\"type\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\">\n                                <option value=\"\">\u8BF7\u9009\u62E9\u7C7B\u578B</option>\n                                <option value=\"income\">\u6536\u5165</option>\n                                <option value=\"expense\">\u652F\u51FA</option>\n                            </select>\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u63CF\u8FF0</label>\n                            <input type=\"text\" name=\"description\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\" placeholder=\"\u5982\uFF1A\u5DE5\u8D44\u3001\u623F\u8D37\u3001\u5956\u91D1\u7B49\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u91D1\u989D (\uFFE5)</label>\n                            <input type=\"number\" name=\"amount\" required min=\"0\" step=\"0.01\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u65E5\u671F</label>\n                            <input type=\"date\" name=\"date\" required class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u5206\u7C7B</label>\n                            <input type=\"text\" name=\"category\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\" placeholder=\"\u5982\uFF1A\u5DE5\u4F5C\u3001\u6295\u8D44\u3001\u751F\u6D3B\u7B49\">\n                        </div>\n                        <div>\n                            <label class=\"flex items-center\">\n                                <input type=\"checkbox\" name=\"is_recurring\" class=\"mr-2\">\n                                <span class=\"text-sm text-gray-700\">\u5B9A\u671F\u91CD\u590D</span>\n                            </label>\n                        </div>\n                        <div id=\"recurringOptions\" class=\"hidden\">\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">\u91CD\u590D\u9891\u7387</label>\n                            <select name=\"recurring_type\" class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\">\n                                <option value=\"daily\">\u6BCF\u5929</option>\n                                <option value=\"weekly\">\u6BCF\u5468</option>\n                                <option value=\"monthly\">\u6BCF\u6708</option>\n                                <option value=\"quarterly\">\u6BCF\u5B63\u5EA6</option>\n                                <option value=\"yearly\">\u6BCF\u5E74</option>\n                            </select>\n                        </div>\n                        <div class=\"flex space-x-3 pt-4\">\n                            <button type=\"button\" onclick=\"hideModal()\" class=\"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\">\u53D6\u6D88</button>\n                            <button type=\"submit\" class=\"flex-1 py-3 px-4 bg-purple-500 text-white rounded-lg hover:bg-purple-600\">\u6DFB\u52A0</button>\n                        </div>\n                    </form>\n                </div>\n            \\`);\n            \n            // \u5B9A\u671F\u9009\u9879\u5207\u6362\n            document.querySelector('input[name=\"is_recurring\"]').addEventListener('change', (e) => {\n                document.getElementById('recurringOptions').classList.toggle('hidden', !e.target.checked);\n            });\n            \n            // \u8868\u5355\u63D0\u4EA4\n            document.getElementById('addCashFlowForm').addEventListener('submit', async (e) => {\n                e.preventDefault();\n                const formData = new FormData(e.target);\n                const data = {\n                    type: formData.get('type'),\n                    description: formData.get('description'),\n                    amount: parseFloat(formData.get('amount')),\n                    date: formData.get('date'),\n                    category: formData.get('category') || null,\n                    is_recurring: formData.get('is_recurring') ? 1 : 0,\n                    recurring_type: formData.get('is_recurring') ? formData.get('recurring_type') : null\n                };\n                \n                try {\n                    await apiClient.createCashFlow(data);\n                    hideModal();\n                    showToast('\u6DFB\u52A0\u6210\u529F');\n                    loadCashFlow();\n                } catch (error) {\n                    showToast('\u6DFB\u52A0\u5931\u8D25', 'error');\n                }\n            });\n        }\n        \n        // \u8BBE\u7F6E\u9875\u9762\u529F\u80FD\n        async function loadSettings() {\n            try {\n                // \u52A0\u8F7D\u7528\u6237\u4FE1\u606F\n                const userInfo = await apiClient.getUserInfo();\n                \n                document.getElementById('usernameInput').value = userInfo.username || '';\n                document.getElementById('phoneInput').value = userInfo.phone || '';\n                document.getElementById('emailInput').value = userInfo.email || '';\n                \n                // \u7ED1\u5B9A\u4FDD\u5B58\u6309\u94AE\u4E8B\u4EF6\n                document.getElementById('saveUserInfoBtn').addEventListener('click', saveUserInfo);\n                \n            } catch (error) {\n                showToast('\u52A0\u8F7D\u8BBE\u7F6E\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u4FDD\u5B58\u7528\u6237\u4FE1\u606F\n        async function saveUserInfo() {\n            const username = document.getElementById('usernameInput').value.trim();\n            const phone = document.getElementById('phoneInput').value.trim();\n            const email = document.getElementById('emailInput').value.trim();\n            \n            if (!username) {\n                showToast('\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A', 'error');\n                return;\n            }\n            \n            try {\n                await apiClient.updateUserInfo({ username, phone, email });\n                showToast('\u4FDD\u5B58\u6210\u529F');\n                // \u5237\u65B0\u4EEA\u8868\u677F\u7684\u7528\u6237\u4FE1\u606F\n                if (currentPage === 'dashboard') {\n                    loadDashboard();\n                }\n            } catch (error) {\n                showToast('\u4FDD\u5B58\u5931\u8D25', 'error');\n            }\n        }\n        \n        // \u8D1F\u503A\u64CD\u4F5C\u51FD\u6570\n        async function deleteLiability(id) {\n            if (!confirm('\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u8D1F\u503A\u5417\uFF1F')) {\n                return;\n            }\n            \n            try {\n                await apiClient.deleteLiability(id);\n                showToast('\u5220\u9664\u6210\u529F');\n                loadLiabilities();\n                // \u5237\u65B0\u4EEA\u8868\u677F\u6570\u636E\n                if (currentPage === 'dashboard') {\n                    loadDashboard();\n                }\n            } catch (error) {\n                showToast('\u5220\u9664\u5931\u8D25', 'error');\n            }\n        }\n        \n        async function editLiability(id) {\n            // TODO: \u5B9E\u73B0\u8D1F\u503A\u7F16\u8F91\u529F\u80FD\n            showToast('\u8D1F\u503A\u7F16\u8F91\u529F\u80FD\u5F85\u5B9E\u73B0', 'info');\n        }\n        \n        // CSS\u6837\u5F0F\n        const style = document.createElement('style');\n        style.textContent = \\`\n            .nav-tab {\n                background: transparent;\n                color: #6b7280;\n                transition: all 0.2s ease;\n            }\n            .nav-tab.active {\n                background: #3b82f6;\n                color: white;\n            }\n            .nav-tab:hover {\n                background: #f3f4f6;\n            }\n            .nav-tab.active:hover {\n                background: #2563eb;\n            }\n            .fade-in {\n                animation: fadeIn 0.3s ease-in;\n            }\n            @keyframes fadeIn {\n                from { opacity: 0; transform: translateY(10px); }\n                to { opacity: 1; transform: translateY(0); }\n            }\n            \n            /* \u79FB\u52A8\u7AEF\u4F18\u5316 */\n            @media (max-width: 640px) {\n                .grid {\n                    gap: 0.75rem;\n                }\n                .p-6 {\n                    padding: 1rem;\n                }\n                .text-xl {\n                    font-size: 1.125rem;\n                }\n                .text-2xl {\n                    font-size: 1.25rem;\n                }\n            }\n            \n            /* Toast \u52A8\u753B */\n            .translate-x-full {\n                transform: translateX(100%);\n            }\n            \n            /* \u6A21\u6001\u6846\u52A8\u753B */\n            .modal-enter {\n                animation: modalEnter 0.3s ease-out;\n            }\n            \n            @keyframes modalEnter {\n                from {\n                    opacity: 0;\n                    transform: translateY(20px);\n                }\n                to {\n                    opacity: 1;\n                    transform: translateY(0);\n                }\n            }\n            \n            /* \u6309\u94AE\u70B9\u51FB\u6548\u679C */\n            .btn-press:active {\n                transform: scale(0.98);\n            }\n        \\`;\n        document.head.appendChild(style);\n        \n        // \u9875\u9762\u521D\u59CB\u5316\n        document.addEventListener('DOMContentLoaded', function() {\n            // \u521D\u59CB\u5316\u83DC\u5355\n            initializeMenu();\n            \n            // \u521D\u59CB\u5316\u5BFC\u822A\u6309\u94AE\u4E8B\u4EF6\n            document.getElementById('dashboardBtn').addEventListener('click', () => showPage('dashboard'));\n            document.getElementById('assetsBtn').addEventListener('click', () => showPage('assets'));\n            document.getElementById('liabilitiesBtn').addEventListener('click', () => showPage('liabilities'));\n            document.getElementById('cashFlowBtn').addEventListener('click', () => showPage('cashFlow'));\n            \n            // \u9ED8\u8BA4\u663E\u793A\u4EEA\u8868\u677F\u9875\u9762\n            showPage('dashboard');\n        });\n    </script>\n</body>\n</html>`;\n  \n  return new Response(html, {\n    headers: { 'Content-Type': 'text/html' }\n  });\n});\n\n// \u5176\u4ED6\u9759\u6001\u8D44\u6E90\u8DEF\u7531\uFF08\u7B80\u5316\u5904\u7406\uFF09\nrouter.get('/assets/*', async (request) => {\n  return new Response('Static asset not found', { status: 404 });\n});\n\nrouter.get('/src/*', async (request) => {\n  return new Response('Static asset not found', { status: 404 });\n});\n\n// API Routes\n\n// \u83B7\u53D6\u6240\u6709\u8D44\u4EA7\u7C7B\u578B\nrouter.get('/api/asset-types', async (request, env) => {\n  try {\n    const { results } = await env.DB.prepare(`\n      SELECT * FROM asset_types ORDER BY category, name\n    `).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u521B\u5EFA\u65B0\u8D44\u4EA7\u7C7B\u578B\nrouter.post('/api/asset-types', async (request, env) => {\n  try {\n    const data = await request.json();\n    const { name, category, has_depreciation, depreciation_rate, description } = data;\n    \n    const result = await env.DB.prepare(`\n      INSERT INTO asset_types (name, category, has_depreciation, depreciation_rate, description)\n      VALUES (?, ?, ?, ?, ?)\n    `).bind(name, category, has_depreciation || false, depreciation_rate || 0.0, description || '').run();\n    \n    return new Response(JSON.stringify({ id: result.meta.last_row_id, success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u6240\u6709\u8D44\u4EA7\nrouter.get('/api/assets', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const { results } = await env.DB.prepare(`\n      SELECT a.*, at.name as asset_type_name, at.category, at.has_depreciation, at.depreciation_rate\n      FROM assets a\n      JOIN asset_types at ON a.asset_type_id = at.id\n      WHERE a.user_id = ?\n      ORDER BY a.created_at DESC\n    `).bind(userId).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u521B\u5EFA\u65B0\u8D44\u4EA7\nrouter.post('/api/assets', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const data = await request.json();\n    const { asset_type_id, name, current_value, purchase_value, purchase_date, expected_return_rate, description } = data;\n    \n    const result = await env.DB.prepare(`\n      INSERT INTO assets (user_id, asset_type_id, name, current_value, purchase_value, purchase_date, expected_return_rate, description)\n      VALUES (?, ?, ?, ?, ?, ?, ?, ?)\n    `).bind(userId, asset_type_id, name, current_value, purchase_value || null, purchase_date || null, expected_return_rate || 0.0, description || '').run();\n    \n    // \u8BB0\u5F55\u521D\u59CB\u4EF7\u503C\u5386\u53F2\n    await env.DB.prepare(`\n      INSERT INTO asset_value_history (user_id, asset_id, value, record_date)\n      VALUES (?, ?, ?, DATE('now'))\n    `).bind(userId, result.meta.last_row_id, current_value).run();\n    \n    return new Response(JSON.stringify({ id: result.meta.last_row_id, success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u66F4\u65B0\u8D44\u4EA7\u4EF7\u503C\nrouter.put('/api/assets/:id/value', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const assetId = request.params.id;\n    const { current_value } = await request.json();\n    \n    // \u66F4\u65B0\u8D44\u4EA7\u5F53\u524D\u4EF7\u503C\n    await env.DB.prepare(`\n      UPDATE assets SET current_value = ?, updated_at = CURRENT_TIMESTAMP\n      WHERE id = ? AND user_id = ?\n    `).bind(current_value, assetId, userId).run();\n    \n    // \u8BB0\u5F55\u4EF7\u503C\u5386\u53F2\n    await env.DB.prepare(`\n      INSERT INTO asset_value_history (user_id, asset_id, value, record_date)\n      VALUES (?, ?, ?, DATE('now'))\n    `).bind(userId, assetId, current_value).run();\n    \n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u66F4\u65B0\u8D44\u4EA7\nrouter.put('/api/assets/:id', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const { id } = request.params;\n    const data = await request.json();\n    const { asset_type_id, name, current_value, purchase_value, purchase_date, expected_return_rate, description } = data;\n    \n    const result = await env.DB.prepare(`\n      UPDATE assets \n      SET asset_type_id = ?, name = ?, current_value = ?, purchase_value = ?, purchase_date = ?, expected_return_rate = ?, description = ?, updated_at = CURRENT_TIMESTAMP\n      WHERE id = ? AND user_id = ?\n    `).bind(asset_type_id, name, current_value, purchase_value || null, purchase_date || null, expected_return_rate || 0.0, description || '', id, userId).run();\n    \n    if (result.changes === 0) {\n      return new Response(JSON.stringify({ error: 'Asset not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n      });\n    }\n    \n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u66F4\u65B0\u8D44\u4EA7\u7C7B\u578B\nrouter.put('/api/asset-types/:id', async (request, env) => {\n  try {\n    const { id } = request.params;\n    const data = await request.json();\n    const { name, category, has_depreciation, depreciation_rate, description } = data;\n    \n    const result = await env.DB.prepare(`\n      UPDATE asset_types \n      SET name = ?, category = ?, has_depreciation = ?, depreciation_rate = ?, description = ?, updated_at = CURRENT_TIMESTAMP\n      WHERE id = ?\n    `).bind(name, category, has_depreciation || false, depreciation_rate || 0.0, description || '', id).run();\n    \n    if (result.changes === 0) {\n      return new Response(JSON.stringify({ error: 'Asset type not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n      });\n    }\n    \n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u5220\u9664\u8D44\u4EA7\u7C7B\u578B\nrouter.delete('/api/asset-types/:id', async (request, env) => {\n  try {\n    const { id } = request.params;\n    \n    const result = await env.DB.prepare(`\n      DELETE FROM asset_types WHERE id = ?\n    `).bind(id).run();\n    \n    if (result.changes === 0) {\n      return new Response(JSON.stringify({ error: 'Asset type not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n      });\n    }\n    \n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u5220\u9664\u8D44\u4EA7\nrouter.delete('/api/assets/:id', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const { id } = request.params;\n    \n    // \u5148\u5220\u9664\u76F8\u5173\u7684\u4EF7\u503C\u5386\u53F2\u8BB0\u5F55\n    await env.DB.prepare(`\n      DELETE FROM asset_value_history WHERE asset_id = ? AND user_id = ?\n    `).bind(id, userId).run();\n    \n    // \u5220\u9664\u8D44\u4EA7\n    const result = await env.DB.prepare(`\n      DELETE FROM assets WHERE id = ? AND user_id = ?\n    `).bind(id, userId).run();\n    \n    if (result.changes === 0) {\n      return new Response(JSON.stringify({ error: 'Asset not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n      });\n    }\n    \n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u6240\u6709\u8D1F\u503A\nrouter.get('/api/liabilities', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const { results } = await env.DB.prepare(`\n      SELECT * FROM liabilities WHERE user_id = ? ORDER BY created_at DESC\n    `).bind(userId).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u521B\u5EFA\u65B0\u8D1F\u503A\nrouter.post('/api/liabilities', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const data = await request.json();\n    const { liability_type, description, total_amount, remaining_amount, monthly_payment, interest_rate, start_date, end_date } = data;\n    \n    const result = await env.DB.prepare(`\n      INSERT INTO liabilities (user_id, liability_type, description, total_amount, remaining_amount, monthly_payment, interest_rate, start_date, end_date)\n      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\n    `).bind(userId, liability_type, description || '', total_amount, remaining_amount, monthly_payment, interest_rate || 0.0, start_date || null, end_date || null).run();\n    \n    return new Response(JSON.stringify({ id: result.meta.last_row_id, success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u66F4\u65B0\u8D1F\u503A\nrouter.put('/api/liabilities/:id', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const { id } = request.params;\n    const data = await request.json();\n    const { liability_type, description, total_amount, remaining_amount, monthly_payment, interest_rate, start_date, end_date } = data;\n    \n    const result = await env.DB.prepare(`\n      UPDATE liabilities \n      SET liability_type = ?, description = ?, total_amount = ?, remaining_amount = ?, monthly_payment = ?, interest_rate = ?, start_date = ?, end_date = ?, updated_at = CURRENT_TIMESTAMP\n      WHERE id = ? AND user_id = ?\n    `).bind(liability_type, description || '', total_amount, remaining_amount, monthly_payment, interest_rate || 0.0, start_date || null, end_date || null, id, userId).run();\n    \n    if (result.changes === 0) {\n      return new Response(JSON.stringify({ error: 'Liability not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n      });\n    }\n    \n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u5220\u9664\u8D1F\u503A\nrouter.delete('/api/liabilities/:id', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const { id } = request.params;\n    \n    const result = await env.DB.prepare(`\n      DELETE FROM liabilities WHERE id = ? AND user_id = ?\n    `).bind(id, userId).run();\n    \n    if (result.changes === 0) {\n      return new Response(JSON.stringify({ error: 'Liability not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n      });\n    }\n    \n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u73B0\u91D1\u6D41\u8BB0\u5F55\nrouter.get('/api/cash-flows', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const url = new URL(request.url);\n    const startDate = url.searchParams.get('start_date');\n    const endDate = url.searchParams.get('end_date');\n    \n    let query = 'SELECT * FROM cash_flows WHERE user_id = ?';\n    let params = [userId];\n    \n    if (startDate && endDate) {\n      query += ' AND date BETWEEN ? AND ?';\n      params.push(startDate, endDate);\n    }\n    \n    query += ' ORDER BY date DESC';\n    \n    const { results } = await env.DB.prepare(query).bind(...params).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u521B\u5EFA\u73B0\u91D1\u6D41\u8BB0\u5F55\nrouter.post('/api/cash-flows', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const data = await request.json();\n    const { date, amount, type, category, description, is_recurring } = data;\n    \n    const result = await env.DB.prepare(`\n      INSERT INTO cash_flows (user_id, date, amount, type, category, description, is_recurring)\n      VALUES (?, ?, ?, ?, ?, ?, ?)\n    `).bind(userId, date, amount, type, category, description || '', is_recurring || 0).run();\n    \n    return new Response(JSON.stringify({ id: result.meta.last_row_id, success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u5220\u9664\u73B0\u91D1\u6D41\u8BB0\u5F55\nrouter.delete('/api/cash-flows/:id', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const { id } = request.params;\n    \n    const result = await env.DB.prepare(`\n      DELETE FROM cash_flows WHERE id = ? AND user_id = ?\n    `).bind(id, userId).run();\n    \n    if (result.changes === 0) {\n      return new Response(JSON.stringify({ error: 'Record not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n      });\n    }\n    \n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u66F4\u65B0\u73B0\u91D1\u6D41\u8BB0\u5F55\nrouter.put('/api/cash-flows/:id', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const { id } = request.params;\n    const data = await request.json();\n    const { date, amount, type, category, description, is_recurring } = data;\n    \n    const result = await env.DB.prepare(`\n      UPDATE cash_flows \n      SET date = ?, amount = ?, type = ?, category = ?, description = ?, is_recurring = ?, updated_at = CURRENT_TIMESTAMP\n      WHERE id = ? AND user_id = ?\n    `).bind(date, amount, type, category, description || '', is_recurring || 0, id, userId).run();\n    \n    if (result.changes === 0) {\n      return new Response(JSON.stringify({ error: 'Record not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n      });\n    }\n    \n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u8D44\u4EA7\u603B\u89C8\u7EDF\u8BA1\nrouter.get('/api/dashboard/overview', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    \n    // \u603B\u8D44\u4EA7\u4EF7\u503C\n    const { results: totalAssets } = await env.DB.prepare(`\n      SELECT SUM(current_value) as total_value FROM assets WHERE user_id = ?\n    `).bind(userId).all();\n    \n    // \u603B\u8D1F\u503A\n    const { results: totalLiabilities } = await env.DB.prepare(`\n      SELECT SUM(remaining_amount) as total_debt FROM liabilities WHERE user_id = ?\n    `).bind(userId).all();\n    \n    // \u8D44\u4EA7\u5206\u7C7B\u7EDF\u8BA1\n    const { results: assetsByCategory } = await env.DB.prepare(`\n      SELECT at.category, SUM(a.current_value) as total_value, COUNT(a.id) as count\n      FROM assets a\n      JOIN asset_types at ON a.asset_type_id = at.id\n      WHERE a.user_id = ?\n      GROUP BY at.category\n    `).bind(userId).all();\n    \n    // \u8D1F\u503A\u5206\u7C7B\u7EDF\u8BA1\n    const { results: liabilitiesByType } = await env.DB.prepare(`\n      SELECT liability_type, SUM(remaining_amount) as total_amount, COUNT(id) as count\n      FROM liabilities\n      WHERE user_id = ?\n      GROUP BY liability_type\n    `).bind(userId).all();\n    \n    // \u672C\u6708\u73B0\u91D1\u6D41\n    const { results: monthlyFlow } = await env.DB.prepare(`\n      SELECT \n        type,\n        SUM(amount) as total_amount\n      FROM cash_flows \n      WHERE user_id = ? AND date >= DATE('now', 'start of month')\n      GROUP BY type\n    `).bind(userId).all();\n    \n    const overview = {\n      total_assets: totalAssets[0]?.total_value || 0,\n      total_liabilities: totalLiabilities[0]?.total_debt || 0,\n      net_worth: (totalAssets[0]?.total_value || 0) - (totalLiabilities[0]?.total_debt || 0),\n      assets_by_category: assetsByCategory,\n      liabilities_by_type: liabilitiesByType,\n      monthly_cash_flow: monthlyFlow\n    };\n    \n    return new Response(JSON.stringify(overview), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u6536\u652F\u5E73\u8861\u9884\u6D4B\nrouter.get('/api/analytics/balance-forecast', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    \n    // \u52A8\u6001\u83B7\u53D6\u6709\u6570\u636E\u7684\u5E74\u4EFD\n    const availableYears = await env.DB.prepare(`\n      SELECT DISTINCT strftime('%Y', date) as year \n      FROM cash_flows \n      WHERE user_id = ? \n      UNION \n      SELECT DISTINCT strftime('%Y', actual_date) as year \n      FROM cash_flow_history \n      WHERE user_id = ?\n      ORDER BY year DESC\n    `).bind(userId, userId).all();\n    \n    const targetYear = availableYears.results.length > 0 ? availableYears.results[0].year : new Date().getFullYear().toString();\n    \n    // \u83B7\u53D6\u4ECA\u5E74\u7684\u9884\u671F\u6536\u5165\u548C\u652F\u51FA\uFF08\u6765\u81EAcash_flows\u8868\uFF09\n    const { results: plannedFlow } = await env.DB.prepare(`\n      SELECT \n        type as flow_type,\n        SUM(amount) as total_amount\n      FROM cash_flows \n      WHERE user_id = ? AND strftime('%Y', date) = ?\n      GROUP BY type\n    `).bind(userId, targetYear).all();\n    \n    // \u83B7\u53D6\u4ECA\u5E74\u7684\u5B9E\u9645\u6536\u5165\u548C\u652F\u51FA\uFF08\u6765\u81EAcash_flow_history\u8868\uFF09\n    const { results: actualFlow } = await env.DB.prepare(`\n      SELECT \n        type as flow_type,\n        SUM(amount) as total_amount\n      FROM cash_flow_history \n      WHERE user_id = ? AND strftime('%Y', actual_date) = ?\n      GROUP BY type\n    `).bind(userId, targetYear).all();\n    \n    let plannedIncome = 0;\n    let plannedExpense = 0;\n    let actualIncome = 0;\n    let actualExpense = 0;\n    \n    plannedFlow.forEach(flow => {\n      if (flow.flow_type === 'income') {\n        plannedIncome += flow.total_amount;\n      } else if (flow.flow_type === 'expense') {\n        plannedExpense += flow.total_amount;\n      }\n    });\n    \n    actualFlow.forEach(flow => {\n      if (flow.flow_type === 'income') {\n        actualIncome += flow.total_amount;\n      } else if (flow.flow_type === 'expense') {\n        actualExpense += flow.total_amount;\n      }\n    });\n    \n    const plannedNetFlow = plannedIncome - plannedExpense;\n    const actualNetFlow = actualIncome - actualExpense;\n    const status = actualNetFlow > 0 ? '\u76C8\u4F59' : actualNetFlow < 0 ? '\u4E8F\u635F' : '\u5E73\u8861';\n    \n    const forecast = {\n      planned: {\n        income: plannedIncome,\n        expense: plannedExpense,\n        balance: plannedNetFlow\n      },\n      actual: {\n        income: actualIncome,\n        expense: actualExpense,\n        balance: actualNetFlow\n      },\n      comparison: {\n        income_diff: actualIncome - plannedIncome,\n        expense_diff: actualExpense - plannedExpense,\n        balance_diff: actualNetFlow - plannedNetFlow\n      },\n      status: status\n    };\n    \n    return new Response(JSON.stringify(forecast), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u5E74\u5EA6\u6536\u652F\u7EDF\u8BA1\nrouter.get('/api/analytics/yearly-income-expense', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    \n    const { results } = await env.DB.prepare(`\n      SELECT \n        strftime('%Y', date) as year,\n        type as flow_type,\n        SUM(amount) as total_amount\n      FROM cash_flows \n      WHERE user_id = ?\n      GROUP BY year, type\n      ORDER BY year DESC\n    `).bind(userId).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u6708\u5EA6\u6536\u652F\u7EDF\u8BA1\uFF08\u533A\u5206\u5B9E\u9645\u548C\u9884\u671F\uFF09\nrouter.get('/api/analytics/monthly-income-expense', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    \n    // \u52A8\u6001\u83B7\u53D6\u6709\u6570\u636E\u7684\u5E74\u4EFD\n    const availableYears = await env.DB.prepare(`\n      SELECT DISTINCT strftime('%Y', date) as year \n      FROM cash_flows \n      WHERE user_id = ? \n      UNION \n      SELECT DISTINCT strftime('%Y', actual_date) as year \n      FROM cash_flow_history \n      WHERE user_id = ?\n      ORDER BY year DESC\n    `).bind(userId, userId).all();\n    \n    const targetYear = availableYears.results.length > 0 ? availableYears.results[0].year : new Date().getFullYear().toString();\n    const currentMonth = new Date().getMonth() + 1; // \u5F53\u524D\u6708\u4EFD (1-12)\n    \n    // \u83B7\u53D6\u9884\u671F\u6570\u636E\uFF08\u6765\u81EA cash_flows \u8868\uFF09- \u5168\u5E74\u6570\u636E\n    const { results: plannedData } = await env.DB.prepare(`\n      SELECT \n        strftime('%Y-%m', date) as month,\n        type as flow_type,\n        SUM(amount) as total_amount,\n        'planned' as data_type\n      FROM cash_flows \n      WHERE user_id = ? AND strftime('%Y', date) = ?\n      GROUP BY month, type\n      ORDER BY month\n    `).bind(userId, targetYear).all();\n    \n    // \u83B7\u53D6\u5B9E\u9645\u6570\u636E\uFF08\u6765\u81EA cash_flow_history \u8868\uFF09- \u5168\u5E74\u6570\u636E\n    const { results: actualData } = await env.DB.prepare(`\n      SELECT \n        strftime('%Y-%m', actual_date) as month,\n        type as flow_type,\n        SUM(amount) as total_amount,\n        'actual' as data_type\n      FROM cash_flow_history \n      WHERE user_id = ? AND strftime('%Y', actual_date) = ?\n      GROUP BY month, type\n      ORDER BY month\n    `).bind(userId, targetYear).all();\n    \n    // \u5408\u5E76\u6570\u636E\n    const combinedData = {\n      planned: plannedData,\n      actual: actualData,\n      currentMonth: currentMonth\n    };\n    \n    return new Response(JSON.stringify(combinedData), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u8D44\u4EA7\u6536\u76CA\u7EDF\u8BA1\uFF08\u57FA\u4E8E\u6210\u672C\u548C\u73B0\u4EF7\uFF09\nrouter.get('/api/analytics/asset-returns', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    \n    const { results } = await env.DB.prepare(`\n      SELECT \n        a.id,\n        a.name as asset_name,\n        at.name as asset_type,\n        a.purchase_value as cost_price,\n        a.current_value as current_price,\n        a.purchase_date,\n        CASE \n          WHEN LOWER(at.name) LIKE '%\u6C7D\u8F66%' OR LOWER(at.name) LIKE '%\u8F66%' THEN\n            -- \u6C7D\u8F66\u6309\u7EBF\u6027\u6298\u65E7\u8BA1\u7B97\uFF08\u5047\u8BBE\u6BCF\u6708\u6298\u65E7\u7387\u4E3A2%\uFF09\n            -1 * a.purchase_value * 0.02 * \n              CAST((julianday('now') - julianday(a.purchase_date)) / 30.44 AS INTEGER)\n          ELSE\n            -- \u623F\u5B50\u3001\u80A1\u7968\u7B49\u7528\u73B0\u4EF7-\u4E70\u5165\u4EF7\n            (a.current_value - a.purchase_value)\n        END as profit_loss,\n        CASE \n          WHEN LOWER(at.name) LIKE '%\u6C7D\u8F66%' OR LOWER(at.name) LIKE '%\u8F66%' THEN\n            -- \u6C7D\u8F66\u6536\u76CA\u7387\u8BA1\u7B97\uFF08\u8D1F\u6570\uFF09\n            CASE WHEN a.purchase_value > 0 THEN\n              ROUND((-1 * a.purchase_value * 0.02 * \n                CAST((julianday('now') - julianday(a.purchase_date)) / 30.44 AS INTEGER)\n              ) * 100.0 / a.purchase_value, 2)\n              ELSE 0\n            END\n          ELSE\n            -- \u5176\u4ED6\u8D44\u4EA7\u6536\u76CA\u7387\u8BA1\u7B97\n            CASE WHEN a.purchase_value > 0 THEN \n              ROUND(((a.current_value - a.purchase_value) * 100.0 / a.purchase_value), 2)\n              ELSE 0 \n            END\n        END as return_rate\n      FROM assets a\n      JOIN asset_types at ON a.asset_type_id = at.id\n      WHERE a.user_id = ?\n      ORDER BY profit_loss DESC\n    `).bind(userId).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u7528\u6237\u4FE1\u606F\nrouter.get('/api/user/info', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    \n    const { results } = await env.DB.prepare(`\n      SELECT username, phone, email, last_login, created_at\n      FROM users \n      WHERE user_id = ?\n    `).bind(userId).all();\n    \n    if (results.length === 0) {\n      return new Response(JSON.stringify({ error: 'User not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n      });\n    }\n    \n    return new Response(JSON.stringify(results[0]), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u66F4\u65B0\u7528\u6237\u4FE1\u606F\nrouter.put('/api/user/info', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const data = await request.json();\n    const { username, phone, email } = data;\n    \n    const result = await env.DB.prepare(`\n      UPDATE users \n      SET username = ?, phone = ?, email = ?, last_login = CURRENT_TIMESTAMP\n      WHERE user_id = ?\n    `).bind(username, phone || null, email || null, userId).run();\n    \n    if (result.changes === 0) {\n      return new Response(JSON.stringify({ error: 'User not found' }), {\n        status: 404,\n        headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n      });\n    }\n    \n    return new Response(JSON.stringify({ success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u6295\u8D44\u6536\u76CA\u5BF9\u6BD4\nrouter.get('/api/investment-returns', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    \n    const { results } = await env.DB.prepare(`\n      SELECT \n        ir.*,\n        a.name as asset_name,\n        at.name as asset_type_name\n      FROM investment_returns ir\n      JOIN assets a ON ir.asset_id = a.id\n      JOIN asset_types at ON a.asset_type_id = at.id\n      WHERE a.user_id = ?\n      ORDER BY ir.return_date DESC\n    `).bind(userId).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u8BB0\u5F55\u6295\u8D44\u6536\u76CA\nrouter.post('/api/investment-returns', async (request, env) => {\n  try {\n    const data = await request.json();\n    const { asset_id, expected_return, actual_return, return_date, period_type, notes } = data;\n    \n    const result = await env.DB.prepare(`\n      INSERT INTO investment_returns (asset_id, expected_return, actual_return, return_date, period_type, notes)\n      VALUES (?, ?, ?, ?, ?, ?)\n    `).bind(asset_id, expected_return, actual_return, return_date, period_type || 'monthly', notes || '').run();\n    \n    return new Response(JSON.stringify({ id: result.meta.last_row_id, success: true }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u7528\u6237\u4FE1\u606F\nrouter.get('/api/user/info', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const { results } = await env.DB.prepare(`\n      SELECT username, created_at, last_login FROM users WHERE user_id = ?\n    `).bind(userId).all();\n    \n    return new Response(JSON.stringify(results[0] || {}), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u5E74\u5EA6\u6536\u652F\u7EDF\u8BA1\nrouter.get('/api/analytics/yearly-income-expense', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const { results } = await env.DB.prepare(`\n      SELECT \n        strftime('%Y', flow_date) as year,\n        flow_type,\n        SUM(amount) as total_amount\n      FROM cash_flows \n      WHERE user_id = ?\n      GROUP BY strftime('%Y', flow_date), flow_type\n      ORDER BY year DESC\n    `).bind(userId).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u6708\u5EA6\u6536\u652F\u7EDF\u8BA1\nrouter.get('/api/analytics/monthly-income-expense', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const { results } = await env.DB.prepare(`\n      SELECT \n        strftime('%Y-%m', flow_date) as month,\n        flow_type,\n        SUM(amount) as total_amount\n      FROM cash_flows \n      WHERE user_id = ? AND flow_date >= DATE('now', '-12 months')\n      GROUP BY strftime('%Y-%m', flow_date), flow_type\n      ORDER BY month DESC\n    `).bind(userId).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u8D44\u4EA7\u6536\u76CA\u7EDF\u8BA1\nrouter.get('/api/analytics/asset-returns', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    const { results } = await env.DB.prepare(`\n      SELECT \n        at.name as asset_type,\n        at.category,\n        AVG(a.expected_return_rate) as avg_expected_return,\n        COUNT(a.id) as asset_count,\n        SUM(a.current_value) as total_value\n      FROM assets a\n      JOIN asset_types at ON a.asset_type_id = at.id\n      WHERE a.user_id = ?\n      GROUP BY at.id, at.name, at.category\n      ORDER BY total_value DESC\n    `).bind(userId).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u4ECA\u5E74\u9884\u8BA1\u548C\u5B9E\u9645\u6536\u652F\u5BF9\u6BD4\nrouter.get('/api/analytics/balance-forecast', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    \n    // \u52A8\u6001\u83B7\u53D6\u6709\u6570\u636E\u7684\u5E74\u4EFD\n    const availableYears = await env.DB.prepare(`\n      SELECT DISTINCT strftime('%Y', date) as year \n      FROM cash_flows \n      WHERE user_id = ? \n      UNION \n      SELECT DISTINCT strftime('%Y', actual_date) as year \n      FROM cash_flow_history \n      WHERE user_id = ?\n      ORDER BY year DESC\n    `).bind(userId, userId).all();\n    \n    const targetYear = availableYears.results.length > 0 ? availableYears.results[0].year : new Date().getFullYear().toString();\n    \n    // \u4ECA\u5E74\u5B9E\u9645\u6536\u652F\uFF08\u6765\u81EA cash_flow_history \u8868\uFF09\n    const { results: actualFlow } = await env.DB.prepare(`\n      SELECT \n        type as flow_type,\n        SUM(amount) as total_amount\n      FROM cash_flow_history \n      WHERE user_id = ? AND strftime('%Y', actual_date) = ?\n      GROUP BY type\n    `).bind(userId, targetYear).all();\n    \n    // \u4ECA\u5E74\u9884\u8BA1\u6536\u652F\uFF08\u6765\u81EA cash_flows \u8868\uFF09\n    const { results: plannedFlow } = await env.DB.prepare(`\n      SELECT \n        type as flow_type,\n        SUM(amount) as total_amount\n      FROM cash_flows \n      WHERE user_id = ? AND strftime('%Y', date) = ?\n      GROUP BY type\n    `).bind(userId, targetYear).all();\n    \n    // \u8BA1\u7B97\u6570\u636E\n    const actualIncome = actualFlow.find(f => f.flow_type === 'income')?.total_amount || 0;\n    const actualExpense = actualFlow.find(f => f.flow_type === 'expense')?.total_amount || 0;\n    const plannedIncome = plannedFlow.find(f => f.flow_type === 'income')?.total_amount || 0;\n    const plannedExpense = plannedFlow.find(f => f.flow_type === 'expense')?.total_amount || 0;\n    \n    return new Response(JSON.stringify({\n      actual: {\n        income: actualIncome,\n        expense: actualExpense,\n        balance: actualIncome - actualExpense\n      },\n      planned: {\n        income: plannedIncome,\n        expense: plannedExpense,\n        balance: plannedIncome - plannedExpense\n      },\n      comparison: {\n        income_diff: actualIncome - plannedIncome,\n        expense_diff: actualExpense - plannedExpense,\n        balance_diff: (actualIncome - actualExpense) - (plannedIncome - plannedExpense)\n      }\n    }), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u5386\u53F2\u73B0\u91D1\u6D41\u6570\u636E\nrouter.get('/api/cash-flows/history', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    \n    const { results } = await env.DB.prepare(`\n      SELECT \n        id,\n        type,\n        description,\n        amount,\n        actual_date,\n        category,\n        created_at\n      FROM cash_flow_history \n      WHERE user_id = ?\n      ORDER BY actual_date DESC\n    `).bind(userId).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u5386\u53F2\u73B0\u91D1\u6D41\u6708\u5EA6\u7EDF\u8BA1\nrouter.get('/api/analytics/historical-monthly-flow', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    \n    const { results } = await env.DB.prepare(`\n      SELECT \n        strftime('%Y-%m', actual_date) as month,\n        type,\n        SUM(amount) as total_amount,\n        COUNT(*) as transaction_count\n      FROM cash_flow_history \n      WHERE user_id = ? AND actual_date >= DATE('now', '-12 months')\n      GROUP BY month, type\n      ORDER BY month DESC\n    `).bind(userId).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// \u83B7\u53D6\u8D44\u4EA7\u4EF7\u503C\u5386\u53F2\u8D8B\u52BF\nrouter.get('/api/analytics/asset-value-trends', async (request, env) => {\n  try {\n    const userId = await getUserId(request, env);\n    \n    const { results } = await env.DB.prepare(`\n      SELECT \n        avh.record_date,\n        avh.value,\n        a.name as asset_name,\n        at.name as asset_type,\n        at.category\n      FROM asset_value_history avh\n      JOIN assets a ON avh.asset_id = a.id\n      JOIN asset_types at ON a.asset_type_id = at.id\n      WHERE avh.user_id = ? AND avh.record_date >= DATE('now', '-12 months')\n      ORDER BY avh.record_date DESC, a.name\n    `).bind(userId).all();\n    \n    return new Response(JSON.stringify(results), {\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\n    });\n  }\n});\n\n// 404 handler\nrouter.all('*', () => new Response('Not Found', { status: 404 }));\n\nexport default {\n  fetch: router.handle,\n};\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"D:\\\\GitHub\\\\personasset\\\\src\\\\worker.js\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"D:\\\\GitHub\\\\personasset\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"D:\\\\GitHub\\\\personasset\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"D:\\\\GitHub\\\\personasset\\\\src\\\\worker.js\";\n\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"D:\\\\GitHub\\\\personasset\\\\.wrangler\\\\tmp\\\\bundle-4iNbFn\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"D:\\\\GitHub\\\\personasset\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"D:\\\\GitHub\\\\personasset\\\\.wrangler\\\\tmp\\\\bundle-4iNbFn\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"D:\\\\GitHub\\\\personasset\\\\.wrangler\\\\tmp\\\\bundle-4iNbFn\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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AAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;A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",
  "names": ["Router", "base", "routes", "other", "__proto__", "Proxy", "get", "target", "prop", "receiver", "path", "fetch", "route", "handlers", "push", "toUpperCase", "RegExp", "replace", "async", "request", "args", "response", "match", "url", "URL", "query", "k", "v", "searchParams", "concat", "method", "regex", "pathname", "params", "groups", "handler", "proxy", "createResponse", "format", "transform", "body", "headers", "rest", "constructor", "name", "Response", "entries", "Object", "fromEntries", "json", "JSON", "stringify", "text", "createResponse", "String", "html", "jpeg", "png", "webp", "e", "e"]
}
